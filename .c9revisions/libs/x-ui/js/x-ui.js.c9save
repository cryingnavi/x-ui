{"ts":1382332515741,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"/*\n * \n * http://\n *\n * Copyright 2011, Young Nam, Heo \n * Dual licensed under the GPL Version 1 licenses.\n *\n */\n\n\n/*\n\tNamespace Create\n*/\nX = {\n    version : '1.1.0.0'\n};\n\n/*\n\tX Common\n*/\n(function(){\n\n\tvar win = $(window), \n\t\tdoc = $(document),\n\t\tbody;\n\n\tX.apply = $.extend;\n\tX.apply(X, {\n\t\temptyFn: $.noop,\n\t\tformat: function(str){\n\t\t\tvar args = arguments, len = args.length;\n\t\t\tvar reg;\n\t\t\tfor(var i=0; i<len; i++){\n\t\t\t\treg = new RegExp('\\\\{'+i+'\\\\}', 'g');\n\t\t\t\tstr = str.replace(reg, args[i+1]);\n\t\t\t}\n\t\t\treturn str;\n\t\t},\n\t\textend: function(sp, proto){\n\t\t\tvar sb = function(){\n\t\t\t\tvar args = $.makeArray(arguments);\n\t\t\t\tthis.initialize.apply(this, args);\n\t\t\t};\n\n\t\t\tvar F = function(){ },\n\t\t\t\tspp = sp.prototype;\n\t\t\t\n\t\t\tF.prototype = spp;\n\t\t\tif(!spp.initialize){\n\t\t\t\tspp.initialize = X.emptyFn;\n\t\t\t}\n\t\t\tsb.prototype = new F();\n\t\t\tsb.prototype.constructor = sb;\n\t\t\tsb.base = spp;\n\n\t\t\tif (proto){\n\t\t\t\tX.apply(sb.prototype, proto);\n\t\t\t}\n\t\t\t\n\t\t\tsb.extend = function(proto){\n\t\t\t\tvar sp = this;\n\t\t\t\treturn X.extend(sp, proto);\n\t\t\t};\n\n\t\t\treturn sb;\n\t\t},\n\t\ttype: function(o){\n\t\t\tvar t = $.type(o);\n\t\t\tif(t === 'object'){\n\t\t\t\tif(o.innerHTML){\n\t\t\t\t\tt = 'dom';\n\t\t\t\t}\n\t\t\t\telse if(o.jquery){\n\t\t\t\t\tt = 'jquery';\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn t;\n\t\t},\n\t\tgetOrientation: function(){\n\t\t\tvar ori = window.orientation;\n\t\t\tif(ori === 0){\n\t\t\t\treturn 'portrait';\n\t\t\t}\n\t\t\telse if(ori === 90){\n\t\t\t\treturn 'landscape';\n\t\t\t}\n\t\t\telse if(ori === -90){\n\t\t\t\treturn 'landscape';\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn 'portrait';\n\t\t\t}\n\t\t},\n\t\tgetBody: function(flag){\n\t\t\tif(!body){\n\t\t\t\tbody = $('body');\n\t\t\t}\n\t\t\treturn flag === true ? document.body : body;\n\t\t},\n\t\tgetDoc: function(flag){\n\t\t\treturn flag === true ? document : doc;\n\t\t},\n\t\tgetWindow: function(flag){\n\t\t\treturn flag === true ? window : win;\n\t\t},\n\t\tgetWindowSize: function(){\n\t\t\tvar win = this.getWindow();\n\t\t\treturn {\n\t\t\t\twidth: win.width(),\n\t\t\t\theight: win.height()\n\t\t\t};\n\t\t}\n\t});\n\n\t//animation complete callback\n\t$.fn.animationComplete = function( callback, data ){\n\t\tif('WebKitTransitionEvent' in window){\n\t\t\treturn $(this).one('webkitAnimationEnd', data, callback);\n\t\t}\n\t\telse{\n\t\t\t// defer execution for consistency between webkit/non webkit\n\t\t\tsetTimeout(callback, 0);\n\t\t\treturn $(this);\n\t\t}\n\t};\n\n\t\n\n\tX.platform = (function(){\n\t\tvar userAgent = navigator.userAgent.toLowerCase();\n\t\tvar platform = navigator.platform;\n\n\t\tvar iPhone = /iPhone/i.test(platform),\n\t\t\tiPad = /iPad/i.test(platform),\n\t\t\tiPod = /iPod/i.test(platform);\n\n\t\tvar win = /win/i.test(platform),\n\t\t\tmac = /mac/i.test(platform),\n\t\t\tlinux = /linux/i.test(platform),\n\t\t\tiOs = iPhone || iPad || iPod;\n\n\t\tvar android = /android/i.test(userAgent),\n\t\t\tandroidVersion = parseFloat(userAgent.slice(userAgent.indexOf('android') + 8));\n\n\t\treturn {\n\t\t\tisIos: iOs,\n\t\t\tisWindows: win,\n\t\t\tisMac: mac,\n\t\t\tisLinux: linux,\n\t\t\tisDesktop: win || (!android && linux) || mac,\n\t\t\tiPod: iPod,\n\t\t\tiPhone: iPhone,\n\t\t\tiPad: iPad,\n\t\t\tandroid: android,\n\t\t\tandroidVersion: androidVersion,\n\t\t\thasTouch: ('ontouchstart' in window)\n\t\t};\n\t})();\n\n\tX.events = (function(){\n\t\tvar hasTouch = X.platform.hasTouch ? true : false;\n\t\treturn {\n\t\t\tstart: hasTouch ? 'touchstart' : 'vmousedown',\n\t\t\tmove: hasTouch ? 'touchmove' : 'vmousemove',\n\t\t\tend: hasTouch ? 'touchend' : 'vmouseup',\n\t\t\torientationchange: hasTouch ? 'orientationchange' : 'resize'\n\t\t};\n\t})();\n})();\n\n\nX.apply(Array.prototype, {\n\tremove: function(from, to){\n\t\tvar rest = this.slice((to || from) + 1 || this.length);\n\t\tthis.length = from < 0 ? this.length + from : from;\n\t\treturn this.push.apply(this, rest);\n\t}\n});\n\n\nX.util = { };\nX.util.Observer = X.extend(X.emptyFn, {\n\tinitialize: function(listener){\n\t\tthis.eventTypes = this.eventTypes || {};\n\t\tfor (var attr in listener) {\n\t\t\tthis.eventTypes[attr] = listener[attr];\n\t\t}\n\t},\n\taddEvent: function(){\n\t\tvar a = arguments,\n\t\t\ti = a.length;\n\n\t\twhile(i--) {\n\t\t\tfor (var attr in a[i]){\n\t\t\t\tif(this.eventTypes[attr]){\n\t\t\t\t\tif(X.type(this.eventTypes[attr]) === 'array'){\n\t\t\t\t\t\tthis.eventTypes[attr].push(a[i][attr]);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tthis.eventTypes[attr] = [this.eventTypes[attr], a[i][attr]];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tthis.eventTypes[attr] = a[i][attr];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tfireEvent: function(o, type, args){\n\t\tvar params = o.config ? o.config.params || [] : [];\n\t\t\n\t\tif (this.eventTypes[type]) {\n\t\t\targs = args || [];\n\t\t\tif(X.type(this.eventTypes[type]) === 'object'){\n\t\t\t\tvar event = this.eventTypes[type];\n\t\t\t\tparams = event.params ? params.concat(event.params) : params;\n\t\t\t\t\n\t\t\t\treturn event.fn.apply(event.scope || o, args.concat(params));\n\t\t\t}\n\t\t\telse if(X.type(this.eventTypes[type]) === 'array'){\n\t\t\t\tfor(var i=0, len = this.eventTypes[type].length; i<len; i++){\n\t\t\t\t\tvar event = this.eventTypes[type][i],\n\t\t\t\t\t\tresult = false;\n\n\t\t\t\t\tresult = event.apply(o.config ? o.config.scope || o : o, args.concat(params));\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn this.eventTypes[type].apply(o.config ? o.config.scope || o : o, args.concat(params));\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn false;\n\t},\n\tremoveEvent: function(type){\n\t\tif (this.eventTypes[type]) {\n\t\t\tdelete this.eventTypes[type];\n\t\t}\n\t},\n\tclear: function(){\n\t\tthis.eventTypes = {};\n\t}\n});\n\nX.util.Observer.prototype.on = X.util.Observer.prototype.addEvent;\nX.util.Observer.prototype.off = X.util.Observer.prototype.removeEvent;\nX.util.Observer.prototype.fire = X.util.Observer.prototype.fireEvent;\n\nX.util.ElementManager = X.util.em = {\n\tid: 'x-ui-',\n\tindex: 1000,\n\tget: function(selector){\n\t\tif(selector){\n\t\t\tvar type = X.type(selector);\n\t\t\tif(type === 'string' || type === 'dom'){\n\t\t\t\tvar el = $(selector),\n\t\t\t\t\tme = this;\n\t\t\t\t\n\t\t\t\tel.each(function(){\n\t\t\t\t\tif(!this.id){\n\t\t\t\t\t\tthis.id = me.id + me.index++;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn el;\n\t\t\t}\n\t\t\telse if(type === 'jquery'){\n\t\t\t\tvar el = selector,\n\t\t\t\t\tme = this;\n\t\t\t\t\n\t\t\t\tel.each(function(){\n\t\t\t\t\tif(!this.id){\n\t\t\t\t\t\tthis.id = me.id + me.index++;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn el;\n\t\t\t}\n\t\t\telse if(type === 'object'){\n\t\t\t\tvar config = selector,\n\t\t\t\t\ttag = config.tag;\n\t\t\t\t\n\t\t\t\treturn this.create(tag, config);\n\t\t\t}\n\t\t}\n\n\t\treturn this.create();\n\t},\n\tcreate: function(tag, config){\n\t\tvar el = null;\n\t\tconfig = config || {};\n\t\tdelete config.tag;\n\t\tif(tag){\n\t\t\tel = $('<' + tag + ' />', config);\n\t\t}\n\t\telse{\n\t\t\tel = $('<div />', config);\n\t\t}\n\n\t\tif(config.id){\n\t\t\tel.attr('id', config.id);\n\t\t}\n\t\telse{\n\t\t\tel.attr('id', this.id + this.index++);\n\t\t}\n\n\t\treturn el;\n\t}\n};\n\nX.util.ComponentManager = X.util.cm = {\n\tmap: { },\n\tcString: { },\n\tcreate: function(contain, items){\n\t\tfor(var i=0, len=items.length; i<len; i++){\n\t\t\tif(!items[i].render){\n\t\t\t\titems[i] = new this.cString[items[i].cString](items[i]);\n\t\t\t}\n\n\t\t\tthis.elementAdd(contain, items[i].el);\n\t\t\tif(!items[i].config.autoRender){\n\t\t\t\titems[i].render();\n\t\t\t}\n\t\t\t\n\t\t\tthis.set(items[i].el.attr('id'), items[i]);\n\t\t}\n\t\t\n\t\treturn items;\n\t},\n\telementAdd: function(contain, el){\n\t\tcontain.append(el);\n\t},\n\tset: function(id, item){\n\t\tthis.map[id] = item;\n\t},\n\tget: function(id){\n\t\treturn this.map[id];\n\t},\n\taddCString: function(name, klass){\n\t\tthis.cString[name] = klass;\n\t},\n\tremove: function(id){\n\t\tdelete this.map[id];\n\t},\n\tclear: function(){\n\t\tthis.map = { };\n\t}\n};\n\n\nX.util.Draggable = X.extend(X.util.Observer, {\n\tinitialize: function(config){\n\t\tthis.config = {\n\t\t\thorizontal: true,\n\t\t\tvertical: true,\n\t\t\tdirection: 'both',\n\t\t\tconstrain: false,\n\t\t\thandle: null,\n\t\t\trevert: false,\n\t\t\trevertDuration: 200,\n\t\t\tscroll: null // 구현안됨\n\t\t};\n\t\tX.apply(this.config, config);\t\t\n\t\tX.util.Draggable.base.initialize.call(this, this.config);\n\n\t\tthis.active_el = null;\n\t\tthis.init();\n\t},\n\tinit: function(){\n\t\tthis.el = X.util.em.get(this.config.el)\n\t\t\t.addClass('ui-draggable');\n\n\t\tif (this.config.constrain) {\n\t\t\tthis.config.constrain = $(this.config.constrain);\n\t\t}\n\n\t\tif(!this.config.handle){\n\t\t\tthis.handle = this.el;\n\t\t}\n\t\telse{\n\t\t\tthis.handle = this.el.find(this.config.handle);\n\t\t}\n\t\t\n\t\tif (this.config.direction == 'both') {\n\t\t\tthis.config.horizontal = true;\n\t\t\tthis.config.vertical = true;\n\t\t}\n\t\telse if (this.config.direction == 'x') {\n\t\t\tthis.config.horizontal = true;\n\t\t\tthis.config.vertical = false;\n\t\t}\n\t\telse {\n\t\t\tthis.config.horizontal = false;\n\t\t\tthis.config.vertical = true;\n\t\t}\n\n\t\tthis.initialRegion = {\n\t\t\tt: 0, l: 0,\n\t\t\tr: 0, b: 0\n\t\t};\n\n\t\tthis.offsetToCorner = {\n\t\t\tx: 0, y: 0\n\t\t};\n\n\t\tthis.el.css({\n\t\t\twebkitTransform: 'translate3d(0px, 0px, 0px)',\n\t\t\tmsTransform: 'translate3d(0px, 0px, 0px)',\n\t\t\ttransform: 'translate3d(0px, 0px, 0px)'\n\t\t});\n\n\t\tthis.handle.on(X.events.start, { me:this }, this.onStart);\n\t},\n\treset: function(){\n\t\tvar el = this.active_el,\n\t\t\toffset = el.offset(),\n\t\t\tl = offset.left,\n\t\t\tt = offset.top,\n\t\t\tr = l + el.width(),\n\t\t\tb = t + el.height();\n\t\t\n\t\tthis.startPosition = this.position = {\n\t\t\tx: l || 0,\n\t\t\ty: t || 0\n\t\t};\n\n\t\tvar region = {\n\t\t\tl: l, t: t,\n\t\t\tr: r, b: b\n\t\t};\n\n\t\tthis.initialRegion = this.region = region;\n\t\tthis.transform = { x: 0, y: 0 };\n\t\t\n\t\tthis.transformTo(0, 0);\n\t},\n\tprepareDrag: function(e){\n\t\tthis.reset();\n\n\t\tif (this.config.constrain !== false) {\n\t\t\tvar w = this.config.constrain.width(),\n\t\t\t\th = this.config.constrain.height();\n\t\t\t\n\t\t\tthis.constrainRegion = {\n\t\t\t\tl: 0, t: 0,\n\t\t\t\tr: w, b: h\n\t\t\t};\n\t\t}\n\n\t\tvar pageX = e.originalEvent.touches ? \n\t\t\t\te.originalEvent.touches[0].pageX : e.originalEvent.pageX,\n\t\t\tpageY = e.originalEvent.touches ? \n\t\t\t\te.originalEvent.touches[0].pageY : e.originalEvent.pageY;\n\t\t\t\t\n\t\tthis.offsetToCorner = {\n\t\t\tx: pageX - this.initialRegion.l,\n\t\t\ty: pageY - this.initialRegion.t\n\t\t};\n\t},\n\ttransformTo: function(x, y){\n\t\tvar me = this,\n\t\t\tinitialRegion = me.initialRegion,\n\t\t\tstartPos = me.startPosition || { x: 0, y: 0 },\n\t\t\ttarget = me.active_el.get(0);\n\t\t\n\n\t\ttarget.style.webkitTransform = 'translate3d(' + x + 'px, ' + y + 'px' + ', 0px)';\n\t\ttarget.style.msTransform = 'translate3d(' + x + 'px, ' + y + 'px' + ', 0px)';\n\t\ttarget.style.transform = 'translate3d(' + x + 'px, ' + y + 'px' + ', 0px)';\n\n\t\tme.transform = { x: x, y: y };\n\t\tme.position = {\n\t\t\tx: startPos.x + x,\n\t\t\ty: startPos.y + y\n\t\t};\n\n\t\tme.region = {\n\t\t\tt: initialRegion.t + y,\n\t\t\tr: initialRegion.r + x,\n\t\t\tb: initialRegion.b + y,\n\t\t\tl: initialRegion.l + x\n\t\t};\n\t},\n\tonStart: function(e){\n\t\tvar me = e.data.me;\n\t\t\n\t\tif(me.dragging){\n\t\t\treturn;\n\t\t}\n\n\t\tme.active_el = $(e.target);\n\t\tme.active_el.addClass('ui-dragging');\n\t\tvar target = me.active_el.get(0);\n\n\t\tif(me.config.ghost){\n\t\t\tme.active_el = me._createGhost(me.active_el);\n\t\t}\n\n\t\tme.prepareDrag(e);\n\t\tif (!me.dragging) {\n\t\t\tme.dragging = true;\n\t\t\ttarget.style.webkitTransform = null;\n\t\t\ttarget.style.webkitTransitionDuration = null;\n\t\t}\n\n\t\tme.fireEvent(me, 'start', [me]);\n\t\t\n\t\tif(X.util.ddm){\n\t\t\tX.util.ddm.start(me);\n\t\t}\n\n\t\tX.getDoc().on(X.events.move, { me: me }, me.onMove);\n\t\tX.getDoc().on(X.events.end, { me: me }, me.onEnd);\n\n\t\treturn false;\n\t},\n\tonMove: function(e){\n\t\tvar me = e.data.me,\n\t\t\ttarget = e.target;\n\n\t\tif (me.dragging) {\n\t\t\tvar x = 0,\n\t\t\t\ty = 0,\n\t\t\t\tinitialRegion = me.initialRegion,\n\t\t\t\tconstrainRegion = me.constrainRegion,\n\t\t\t\tpageX = e.originalEvent.touches ? \n\t\t\t\t\te.originalEvent.touches[0].pageX : e.originalEvent.pageX,\n\t\t\t\tpageY = e.originalEvent.touches ? \n\t\t\t\t\te.originalEvent.touches[0].pageY : e.originalEvent.pageY;\n\n\t\t\tif (me.config.horizontal) {\n\t\t\t\tx = pageX - initialRegion.l - me.offsetToCorner.x;\n\t\t\t}\n\t\t\tif (me.config.vertical) {\n\t\t\t\ty = pageY - initialRegion.t - me.offsetToCorner.y;\n\t\t\t}\n\n\t\t\tif (me.config.constrain) {\n\t\t\t\tif (me.config.horizontal) {\n\t\t\t\t\tif (initialRegion.l + x < constrainRegion.l) {\n\t\t\t\t\t\tx = constrainRegion.l - initialRegion.l;\n\t\t\t\t\t}\n\t\t\t\t\tif (initialRegion.r + x > constrainRegion.r) {\n\t\t\t\t\t\tx = constrainRegion.r - initialRegion.r;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (me.config.vertical) {\n\t\t\t\t\tif (initialRegion.t + y < constrainRegion.t) {\n\t\t\t\t\t\ty = constrainRegion.t - initialRegion.t;\n\t\t\t\t\t}\n\t\t\t\t\tif (initialRegion.b + y > constrainRegion.b) {\n\t\t\t\t\t\ty = constrainRegion.b - initialRegion.b;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tme.transformTo(x, y, target);\n\t\t\t\n\t\t\tme.fireEvent(me, 'move', [me, me.region]);\n\t\t\tif(X.util.ddm){\n\t\t\t\tX.util.ddm.move({\n\t\t\t\t\tx: pageX,\n\t\t\t\t\ty: pageY\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t},\n\tonEnd: function(e){\n\t\tvar me = e.data.me;\n\t\tif(!me.dragging){\n\t\t\treturn;\n\t\t}\n\n\t\tvar target = me.el,\n\t\t\tpageX = e.originalEvent.touches ? \n\t\t\t\te.originalEvent.touches[0].pageX : e.originalEvent.pageX,\n\t\t\tpageY = e.originalEvent.touches ? \n\t\t\t\te.originalEvent.touches[0].pageY : e.originalEvent.pageY,\n\t\t\tfn, endFn\n\n\t\tme.dragging = false;\n\t\tme.active_el.removeClass('ui-dragging');\n\t\t\n\t\tendFn = function(){\n\t\t\tif(me.config.ghost){\n\t\t\t\tme.ghost.remove();\n\t\t\t}\n\n\t\t\tvar style = target.get(0).style;\n\t\t\tstyle.webkitTransform = 'translate3d(0px, 0px, 0px)';\n\t\t\tstyle.webkitTransitionDuration = null;\n\n\t\t\tif(!me.config.revert){\n\t\t\t\tstyle.left = me.position.x + 'px';\n\t\t\t\tstyle.top = me.position.y + 'px';\n\t\t\t}\n\n\t\t\tme.fireEvent(me, 'end', [me]);\n\t\t\tif(X.util.ddm){\n\t\t\t\tX.util.ddm.end({\n\t\t\t\t\tx: pageX,\n\t\t\t\t\ty: pageY\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tX.getDoc().off(X.events.move, me.onMove);\n\t\t\tX.getDoc().off(X.events.end, me.onEnd);\n\t\t\t\n\t\t\tme = null;\n\t\t\ttarget = null;\n\t\t};\n\n\t\tif (me.config.revert) {\n\t\t\tfn = function(){\n\t\t\t\tvar anim = {\n\t\t\t\t\t'-webkit-transition-duration': me.config.revertDuration + 'ms',\n\t\t\t\t\t'-webkit-transform': 'translate3d(0px, 0px, 0px)'\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tme.active_el.css(anim).one('webkitTransitionEnd', function(){\n\t\t\t\t\tendFn();\n\t\t\t\t\tendFn = null;\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\tfn = function(){\n\t\t\t\tendFn();\n\t\t\t\tendFn = null;\n\t\t\t};\n\t\t}\n\t\t\n\t\tfn();\t\n\n\t\treturn false;\n\t},\n\t_createGhost: function(target) {\n\t\tthis.ghost = target.clone();\n\n\t\tthis.active_el.before(this.ghost);\n\t\tif(this.ghost.get(0) !== target.get(0) && !(/(fixed|absolute)/).test(this.ghost.css('position'))){\n\t\t\tvar offset = target.offset();\n\t\t\tthis.ghost.css({\n\t\t\t\tposition: 'absolute',\n\t\t\t\tleft: offset.left,\n\t\t\t\ttop: offset.top\n\t\t\t});\n\t\t}\n\n\t\treturn this.ghost;\n\t}\n});\n\n\n\nX.util.Droppable = X.extend(X.util.Observer, {\n\tinitialize: function(config){\n\t\tthis.config = {\n\t\t\taccept: '*'\n\t\t};\n\t\tX.apply(this.config, config);\n\t\t\n\t\tvar listener = {};\n\t\tif(this.config.listener){\n\t\t\tlistener = this.config.listener;\n\t\t}\n\t\tX.util.Droppable.base.initialize.call(this, listener);\n\t\t\n\t\tthis.isEnter = false;\n\t\tthis.init();\n\t},\n\tinit: function(){\n\t\tthis.el = X.util.em.get(this.config.el);\n\t\tthis.el.addClass('ui-droppable');\n\t\t\n\t\tvar id = this.el.attr('id');\n\t\tX.util.ddm.setDroppable(id, this);\n\t},\n\tisAccept: function(drag){\n\t\tif(this.config.accept !== '*'){\n\t\t\treturn drag.el.is(this.config.accept);\n\t\t}\n\n\t\treturn true;\n\t},\n\tstart: function(drag){\n\t\tif(!this.isAccept(drag)){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tvar el = this.el;\n\t\tvar offset = el.offset();\n\t\tthis.left = offset.left;\n\t\tthis.top = offset.top;\n\t\t\n\t\tthis.width = el.outerWidth();\n\t\tthis.height = el.outerHeight();\n\n\t\tthis.fireEvent(this, 'start', [this, drag]);\n\t},\n\tdragging: function(drag, e){\n\t\tif(!this.isAccept(drag)){\n\t\t\treturn;\n\t\t}\n\t\tthis.move(drag, e);\n\t},\n\tmove: function(drag, pageXY){\n\t\tthis.fireEvent(this, 'move', [this, drag]);\n\t\t\n\t\tif(this.isOver(pageXY)) {\n\t\t\tif(!this.isEnter){\n\t\t\t\tthis.isEnter = true;\n\t\t\t\tthis.enter(drag);\n\t\t\t}\n\t\t\tthis.hover(drag);\n\t\t}\n\t\telse{\n\t\t\tif(this.isEnter){\n\t\t\t\tthis.isEnter = false;\n\t\t\t\tthis.leave(drag);\n\t\t\t}\n\t\t}\n\t},\n\tenter: function(drag){\n\t\tthis.fireEvent(this, 'enter', [this, drag]);\n\t},\n\tleave: function(drag){\n\t\tthis.fireEvent(this, 'leave', [this, drag]);\n\t},\n\tdrop: function(drag){\n\t\tthis.fireEvent(this, 'drop', [this, drag]);\n\t},\n\thover: function(drag){\n\t\tthis.fireEvent(this, 'hover', [this, drag]);\n\t},\n\tend: function(drag, pageXY){\n\t\tif(!this.isAccept(drag)){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.fireEvent(this, 'end', [this, drag]);\n\n\t\tthis.isEnter = false;\n\t\tif(this.isOver(pageXY)) {\n\t\t\tthis.drop(drag);\n\t\t}\n\t},\n\tisOver: function(pageXY){\n\t\tvar pageX = pageXY.x;\n\t\tvar pageY = pageXY.y;\n\t\t\n\t\tif(pageX > this.left \n\t\t\t\t&& pageY > this.top \n\t\t\t\t&& pageX < this.left + this.width \n\t\t\t\t&& pageY < this.top + this.height) {\n\t\t\t\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n});\n\n\n\nX.util.DragNDropManager = X.util.ddm = {\n\tdraggable: null,\n\tdroppables: { },\n\tsetDroppable: function(id, drop){\n\t\tthis.droppables[id] = drop;\n\t},\n\tgetDroppable: function(id){\n\t\treturn this.droppables[id];\n\t},\n\tgetDraggable: function(){\n\t\tif(!this.valid()){\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\treturn this.draggable;\n\t},\n\tvalid: function(){\n\t\tvar draggable = this.draggable;\n\t\tif(draggable){\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\treturn false;\n\t},\n\tstart: function(drag){\n\t\tthis.draggable = drag;\n\t\t\n\t\t$.each(this.droppables, function(id, drop){\n\t\t\tdrop.start(X.util.ddm.getDraggable());\n\t\t});\n\t},\n\tmove: function(pageXY){\n\t\tif(!this.valid()){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t$.each(this.droppables, function(id, drop){\n\t\t\tdrop.dragging(X.util.ddm.getDraggable(), pageXY);\n\t\t});\n\t\t\n\t\tpageXY = null;\n\t},\n\tend: function(e, pageXY){\n\t\tif(!this.valid()){\n\t\t\treturn;\n\t\t}\n\t\t$.each(X.util.ddm.droppables, function(id, drop){\n\t\t\tdrop.end(X.util.ddm.getDraggable(), e, pageXY);\n\t\t});\n\t\t\n\t\te = null;\n\t\tpageXY = null;\n\n\t\tX.util.ddm.draggable = null;\n\t}\n};\n\n\nX.util.History = X.extend(X.util.Observer, {\n\tinitialize: function(config){\n\t\tthis.config = {\n\t\t\tvc: null\n\t\t};\n\t\tX.apply(this.config, config);\n\t\t\n\t\tvar listener = { };\n\t\tif(this.config.listener){\n\t\t\tlistener = this.config.listener;\n\t\t}\n\t\tX.util.History.base.initialize.call(this, listener);\n\t\t\n\t\t/* view */\n\t\tthis.viewMap = { };\n\t\t\n\t\t/* ajax data save */\n\t\tthis.ajaxCache = { };\n\t\t\n\t\t/* view id */\n\t\tthis.stack = [];\n\t},\n\tinitPageSave: function(key, view){\n\t\tthis.clear();\n\t\t\n\t\tthis.viewMap[key] = {\n\t\t\tview: view,\n\t\t\ttransition: 'none'\n\t\t};\n\t\tthis.stack.push(key);\n\t},\n\tnextPageSave: function(key, view, transition){\n\t\tthis.viewMap[key] = {\n\t\t\tview: view,\n\t\t\ttransition: transition\n\t\t};\n\t\tthis.stack.push(key);\n\t},\n\tprevPageSave: function(key){\n\t\tvar reverse = this.stack.reverse();\n\t\tvar len = 0;\n\t\tvar removeView = [];\n\n\t\tfor(var i=0; i<reverse.length; i++){\n\t\t\tif(key === reverse[i]){\n\t\t\t\tlen = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tremoveView.push(reverse[i]);\n\t\t\t}\n\t\t}\n\n\t\tfor(var i=0; i<removeView.length; i++){\n\t\t\tif(this.viewMap[removeView[i]]){\n\t\t\t\tthis.viewMap[removeView[i]].view.destroy();\n\t\t\t\tthis.removeViewMap(removeView[i]);\n\t\t\t}\n\t\t}\n\n\t\tthis.stack.reverse();\n\t\tthis.stack = this.stack.slice(0, this.stack.length - len);\n\t},\n\tremoveViewMap: function(key){\n\t\tthis.viewMap[key].view.destroy();\n\t\tdelete this.viewMap[key];\n\t},\n\tremoveStack: function(key){\n\t\tvar i=0,\n\t\t\tstack = this.stack,\n\t\t\tlen = stack.length,\n\t\t\tarray = [];\n\t\tfor(;i<len;i++){\n\t\t\tif(stack[i] !== key){\n\t\t\t\tarray.push(stack[i]);\n\t\t\t}\n\t\t}\n\n\t\tthis.stack = array;\n\t},\n\tgetBackPageInfo: function(){\n\t\tif(this.stack.length < 2){\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tvar from = this.stack[this.stack.length - 1];\n\t\tvar to = this.stack[this.stack.length - 2];\n\t\t\n\t\tvar fromView = this.viewMap[from];\n\t\tvar toView = this.viewMap[to];\n\t\t\n\t\treturn {\n\t\t\tfromView: fromView.view,\n\t\t\ttoView: toView.view,\n\t\t\ttransition: fromView.transition\n\t\t}\n\t},\n\tsetAjaxCache: function(key, cacheData){\n\t\tthis.ajaxCache[key] = cacheData;\n\t},\n\tgetAjaxCache: function(key){\n\t\treturn this.ajaxCache[key];\n\t},\n\tisCache: function(key){\n\t\tif(this.ajaxCache[key]){\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\tgetViewInfo: function(key){\n\t\tif(this.viewMap[key]){\n\t\t\treturn this.viewMap[key];\n\t\t}\n\t\treturn null;\n\t},\n\tclear: function(){\n\t\tvar removeView = this.stack;\n\t\tfor(var i=0; i<removeView.length; i++){\n\t\t\tif(this.viewMap[removeView[i]]){\n\t\t\t\tthis.viewMap[removeView[i]].view.destroy();\n\t\t\t}\n\t\t}\n\n\t\tthis.viewMap = { };\n\t\tthis.ajaxCache = { };\n\t\tthis.stack = [ ];\n\t},\n\tgetStackLength: function(){\n\t\treturn this.stack.length;\n\t}\n});\n\n\n\nX.util.ViewController = X.extend(X.util.Observer, {\n\tinitialize: function(config){\n\t\tthis.config = {\n\t\t\ttransition: 'slide'\n\t\t};\n\t\tX.apply(this.config, config);\n\n\t\tvar listener = {};\n\t\tif(this.config.listener){\n\t\t\tlistener = this.config.listener;\n\t\t}\n\t\tX.util.ViewController.base.initialize.call(this, listener);\n\n\t\tthis.history = new X.util.History({\n\t\t\tvc: this\n\t\t});\n\t\t\n\t\tthis.id = this.config.id || 'ui-vc-' + (X.util.ViewController.id++);\n\n\t\tX.util.ViewController.set(this);\n\t},\n\tinit: function(view){\n\t\tthis.view = view;\n\t},\n\tvalid: function(fromView, toView){\n\t\tif(fromView === toView){\n\t\t\treturn true;\n\t\t}\n\t\telse{\n\t\t\treturn false;\n\t\t}\n\t},\n\ttransitionStart: function(fromView, toView, transition, reverse){\n\t\tvar deferred = new $.Deferred();\n\n\t\tfunction transitionHandler(fromView, toView, transition, reverse){\n\t\t\tvar viewIn = function(){\n\t\t\t\tvar tel = toView.getEl();\n\t\t\t\ttel.addClass(transition + ' in ' + reverse + ' ui-transitioning ui-vc-active');\n\n\t\t\t\tvar fel = fromView.getEl();\n\t\t\t\tfel.addClass(transition + ' out ' + reverse + ' ui-transitioning');\n\n\t\t\t\tif(transition !== 'none'){\n\t\t\t\t\ttel.animationComplete(viewOut);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tviewOut();\n\t\t\t\t}\n\t\t\t},\n\t\t\tviewOut = function(){\n\t\t\t\tvar tel = toView.getEl();\n\t\t\t\ttel.removeClass(transition + ' in ' + reverse + ' ui-transitioning');\n\n\t\t\t\tvar fel = fromView.getEl();\n\t\t\t\tfel.removeClass(transition + ' out ' + reverse + ' ui-transitioning ui-vc-active');\n\t\t\t\t\n\t\t\t\tdone();\n\t\t\t},\n\t\t\tdone = function(){\n\t\t\t\tfromView.hide();\n\t\t\t\tdeferred.resolve(this, [fromView, toView]);\n\n\t\t\t\tfromView = null, toView = null, transition = null, reverse = null;\n\t\t\t};\n\n\t\t\tviewIn();\n\t\t}\n\n\t\ttransitionHandler(fromView, toView, transition, reverse);\n\t\t\n\t\treturn deferred;\n\t},\n\tprevMove: function(fromView, toView, config){\n\t\tvar promise,\n\t\t\tme = this;\n\n\t\tconfig = X.apply({\n\t\t\ttransition: this.config.transition,\n\t\t\treverse: 'reverse'\n\t\t}, config);\n\n\t\n\t\tif(!X.util.vcm.transition){\n\t\t\tconfig.transition = 'none';\n\t\t}\n\n\t\tthis.fireEvent(this, 'beforeprevchange', [fromView, toView, config.params || null]);\n\n\t\ttoView.show();\n\t\tpromise = this.transitionStart(fromView, toView, config.transition, config.reverse);\n\t\tpromise.done(function(){\n\t\t\tX.util.vcm.changing = false;\n\n\t\t\tme.setActiveView(toView);\n\t\t\tme.history.prevPageSave(toView.getId());\n\n\t\t\tme.fireEvent(me, 'afterprevchange', [fromView, toView, config.params || null]);\n\n\t\t\tme = null, fromView = null, toView = null, config = null;\n\t\t});\n\t},\n\tnextMove: function(fromView, toView, config){\n\t\tvar promise,\n\t\t\tme = this;\n\t\t\n\t\tconfig = X.apply({\n\t\t\ttransition: this.config.transition,\n\t\t\thistory: true,\n\t\t\treverse: ''\n\t\t}, config);\n\t\t\n\t\tif(!X.util.vcm.transition){\n\t\t\tconfig.transition = 'none';\n\t\t}\n\n\t\tthis.fireEvent(this, 'beforenextchange', [fromView, toView, config.params || null]);\n\n\t\tpromise = this.transitionStart(fromView, toView, config.transition, config.reverse);\n\t\tpromise.done(function(){\n\t\t\tX.util.vcm.changing = false;\n\t\t\t\n\t\t\tme.setActiveView(toView);\n\t\t\tme.history.nextPageSave(toView.getId(), toView, config.transition);\n\t\t\tme.fireEvent(me, 'afternextchange', [fromView, toView, config.params || null]);\n\n\t\t\tme = null, fromView = null, toView = null, config = null;\n\t\t});\n\t},\n\tbackPage: function(){\n\t\tif(this.history.getStackLength() < 2){\n\t\t\treturn false;\n\t\t}\n\t\tvar o = this.history.getBackPageInfo();\n\t\tthis.prevMove(o.fromView, o.toView, {\n\t\t\ttransition: o.transition\n\t\t});\n\n\t\treturn true;\n\t},\n\tsetActiveView: function(activeView){\n\t\tthis.activeView = activeView;\n\t\tthis.activeView.el.addClass('ui-vc-active');\n\t},\n\tgetActiveView: function(){\n\t\treturn this.activeView;\n\t}\n});\n\nX.util.vcm = X.util.ViewControllerManager = X.apply(X.util.ViewController, {\n\tid: 0,\n\ttransition: true,\n\tchanging: false,\n\tmap: { },\n\tloadingMsg: 'Loading..',\n\terrorMsg: '화면을 불러오지 못했습니다.',\n\tget: function(id){\n\t\treturn this.map[id];\n\t},\n\tset: function(vc){\n\t\tthis.map[vc.id] = vc;\n\t},\n\tsetErrorMsg: function(msg){\n\t\tthis.errorMsg = msg;\n\t},\n\tsetLoadingMsg: function(){\n\t\tthis.loadingMsg = msg;\n\t},\n\tenabledTransition: function(){\n\t\tthis.transition = true;\n\t},\n\tdisabledTransition: function(){\n\t\tthis.transition = false;\n\t}\n});\n\n\nX.util.LocalViewController = X.extend(X.util.ViewController, {\n\tinitialize: function(config){\n\t\tthis.config = {\n\t\t\tactiveIndex: 0,\n\t\t};\n\t\tX.apply(this.config, config);\n\t\tX.util.LocalViewController.base.initialize.call(this, this.config);\n\n\t\tthis.views = [];\n\t},\n\tinit: function(view){\n\t\tX.util.LocalViewController.base.init.call(this, view);\n\t\t\n\t\tthis.views = this.view.config.items;\n\t\tthis.viewsInit();\n\t},\n\tviewsInit: function(){\n\t\tif(this.views.length < 1){\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tvar views = this.views,\n\t\t\tlen = views.length,\n\t\t\tactiveIndex = this.config.activeIndex,\n\t\t\tactiveView;\n\n\t\tactiveView = views[activeIndex];\n\n\t\tthis.setActiveView(activeView);\n\t\tthis.history.initPageSave(activeView.getId(), activeView);\n\n\t\tviews.forEach(function(view){\n\t\t\tview.el.addClass('ui-vc-views');\n\t\t\tview.hide();\n\t\t});\n\n\t\tactiveView.show();\n\t},\n\tgetActiveIndex: function(){\n\t\tvar active = this.getActiveView();\n\t\tfor(var i=0; i<this.views.length; i++){\n\t\t\tif(active === this.views[i]){\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t},\n\tgetView: function(index){\n\t\tif(this.views.length < 1){\n\t\t\treturn null;\n\t\t}\n\t\t\n\t\tvar view = this.views[index];\n\t\tif(!view){\n\t\t\treturn null;\n\t\t}\n\t\t\n\t\treturn view;\n\t},\n\tnextPage: function(config){\n\t\tif(X.util.vcm.changing){\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tif(!config){\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tvar fromView = this.getActiveView(),\n\t\t\ttoView = this.getView(config.index);\n\t\t\n\t\tif(this.valid(fromView, toView)){\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tX.util.vcm.changing = true;\n\n\t\ttoView.show();\n\t\tthis.nextMove(fromView, toView, config);\n\t},\n\tprevPage: function(config){\n\t\tif(X.util.vcm.changing){\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tif(!config){\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tvar fromView = this.getActiveView(),\n\t\t\ttoViewInfo = this.history.getViewInfo(this.getView(config.index).getId());\n\t\t\n\t\tif(this.valid(fromView, toViewInfo.view)){\n\t\t\treturn false;\n\t\t}\n\n\t\tX.util.vcm.changing = true;\n\n\t\ttoViewInfo.view.show();\n\t\tthis.prevMove(fromView, toViewInfo.view, {\n\t\t\ttransition: toViewInfo.transition\n\t\t});\n\t},\n\tappendView: function(view){\n\t\tview.el.addClass('ui-vc-active');\n\t\tthis.views.push(view);\n\n\t\treturn view;\n\t},\n\tremoveView: function(view){\n\t\tvar i=0,\n\t\t\tviews = this.views,\n\t\t\tlen = views.length,\n\t\t\tarray = [];\n\t\t\n\t\tfor(; i<len; i++){\n\t\t\tif(views[i] !== view){\n\t\t\t\tarray.push(views[i]);\n\t\t\t}\n\t\t}\n\t\tthis.views = array;\n\n\t\tthis.history.removeMap(id);\n\t\tthis.history.removeStack(id);\n\n\t\treturn view;\n\t}\n});\n\n\nX.util.cm.addCString('localviewcontroller', X.util.LocalViewController);\n\n\nX.util.RemoteViewController = X.extend(X.util.ViewController, {\n\tinitialize: function(config){\n\t\tthis.config = { \n\t\t\tinitPage: null\n\t\t};\n\t\tX.apply(this.config, config);\n\t\tX.util.RemoteViewController.base.initialize.call(this, this.config);\n\n\t\tthis.views = [];\n\t\tthis.updater = new X.util.ViewUpdater({\n\t\t\tvc: this\n\t\t});\n\t},\n\tinit: function(view){\n\t\tX.util.RemoteViewController.base.init.call(this, view);\n\t\t\n\t\tif(this.config.initPage){\n\t\t\tthis.initPage(this.config.initPage);\n\t\t}\n\t},\n\tinitPage: function(config){\n\t\tthis.fireEvent(this, 'beforeinit', []);\n\t\tthis.callMethod = 'initSuccess';\n\t\tthis.send(config);\n\t},\n\tnextPage: function(config){\n\t\tif(X.util.vcm.changing){\n\t\t\treturn;\n\t\t}\n\t\tX.util.ViewController.changing = true;\n\t\tthis.callMethod = 'nextSuccess';\n\t\t\n\t\tthis.send(config);\n\t},\n\tprevPage: function(config){\n\t\tif(X.util.vcm.changing){\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tif(!config){\n\t\t\treturn false;\n\t\t}\n\n\t\tvar fromView = this.getActiveView(),\n\t\t\ttoViewInfo = this.history.getViewInfo(config.url);\n\t\t\n\t\tif(this.valid(fromView, toViewInfo.view)){\n\t\t\treturn false;\n\t\t}\n\n\t\tX.util.vcm.changing = true;\n\t\tthis.prevMove(fromView, toViewInfo.view, {\n\t\t\ttransition: toViewInfo.transition\n\t\t});\n\t},\n\tgetToView: function(index){\n\t\tvar view;\n\t\tvar config = index;\n\t\tconfig.scroll = false;\n\t\tview = new X.View(config);\n\t\t\n\t\tview.getEl().addClass('ui-vc-views');\n\t\treturn view;\n\t},\n\tsend: function(config){\n\t\tif(!this.history.isCache(config.url)){\n\t\t\t//loading..\n\t\t\tthis.loading = X.util.em.get()\n\t\t\t\t.html(X.util.vcm.loadingMsg).addClass('ui-loading-msg');\n\n\t\t\tX.getBody().prepend(this.loading);\n\t\t\tthis.loading.addClass('ui-popup in');\n\n\t\t\tif(this.updater && config.url){\n\t\t\t\tif(config.url){\n\t\t\t\t\tthis.updater.send(config);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tthis.success(this.history.getAjaxCache(config.url), config);\n\t\t}\n\t},\n\tsuccess: function(data, config){\n\t\tif(this.loading){\n\t\t\tthis.loading.remove();\n\t\t}\n\n\t\tthis.history.setAjaxCache(config.url, data);\n\t\tdata = $(data);\n\n\t\tvar html = [],\n\t\t\tscript = [];\n\t\t\n\t\tdata.each(function(){\n\t\t\tif(this.nodeName !== 'SCRIPT'){\n\t\t\t\thtml.push(this);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tscript.push(this);\n\t\t\t}\n\t\t});\n\t\t\n\t\tdata = {\n\t\t\thtml: $(html),\n\t\t\tscript: $(script)\n\t\t};\n\t\t\n\t\tvar toViewEl = data.html.eq(0),\n\t\t\tviewConfig = { id: config.url },\n\t\t\ttoView;\n\t\t\n\t\ttoView = this.history.getViewInfo(config.url);\n\t\tif(!toView){\n\t\t\ttoView = this.getToView(viewConfig);\n\t\t\ttoView.el.addClass('ui-vc-views');\n\t\t}\n\t\telse{\n\t\t\ttoView = toView.view;\n\t\t}\n\n\t\tthis[this.callMethod](data, toView, config);\n\t},\n\tinitSuccess: function(data, toView, config){\n\t\tthis.history.initPageSave(config.url, toView);\n\t\n\t\tthis.setActiveView(toView);\n\t\ttoView.setContent(data.html);\n\t\tthis.view.add([toView]);\n\t\ttoView.body.append(data.script);\n\n\t\tthis.fireEvent(this, 'afterinit', [this.getActiveView()]);\n\t},\n\tnextSuccess: function(data, toView, config){\n\t\tvar fromView = this.getActiveView({\n\t\t\tid: config.url\n\t\t});\t\t\n\n\t\tif(!this.history.getViewInfo(config.url)){\n\t\t\ttoView.setContent(data.html);\n\t\t\tthis.view.add([toView]);\n\t\t\ttoView.body.append(data.script);\n\t\t}\n\t\tthis.nextMove(fromView, toView, config);\n\t},\n\terrorTransition: function(div, type){\n\t\tvar deferred = new $.Deferred();\n\n\t\tfunction transitionHandler(div, type){\n\t\t\tvar divIn = function(){\n\t\t\t\tdiv.addClass('ui-popup in');\n\t\t\t\tdiv.animationComplete(divOut);\n\t\t\t},\n\t\t\tdivOut = function(){\n\t\t\t\twindow.setTimeout(function(){\n\t\t\t\t\tdiv.removeClass('ui-popup in').addClass('ui-popup out');\n\t\t\t\t\tdiv.animationComplete(done);\n\t\t\t\t}, 3000);\n\t\t\t},\n\t\t\tdone = function(){\n\t\t\t\tdeferred.resolve(this);\n\n\t\t\t\tdiv = null, type = null;\n\t\t\t};\n\n\t\t\tif(type === 'show'){\n\t\t\t\tdivOut();\n\t\t\t}\n\t\t\telse{\n\t\t\t\tdivIn();\n\t\t\t}\n\t\t}\n\n\t\ttransitionHandler(div, type);\n\t\t\n\t\treturn deferred;\n\t},\n\terror: function(){\n\t\t//error\n\t\tvar div,\n\t\t\tpromise,\n\t\t\tfn = function(div){\n\t\t\t\tvar promise = this.errorTransition(div);\n\t\t\t\treturn promise;\n\t\t\t};\n\t\t\n\t\tif(this.loading){\n\t\t\tdiv = this.loading;\n\t\t\tdiv.html(X.util.vcm.errorMsg);\n\t\t\t\n\t\t\tif(div.css('display') !== 'none'){\n\t\t\t\tpromise = this.errorTransition(div, 'show');\n\t\t\t}\n\t\t\telse{\n\t\t\t\tpromise = fn.call(this, div);\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tvar div = X.util.em.get()\n\t\t\t\t.html(X.util.vcm.errorMsg).addClass('ui-loading-msg');\n\t\t\tX.getBody().prepend(div);\n\t\t\t\n\t\t\tpromise = fn.call(this, div);\n\t\t}\n\n\t\tpromise.done(function(){\n\t\t\tX.util.vcm.changing = false;\n\t\t\tdiv.remove();\n\t\t\tdiv = null;\n\t\t});\n\t}\n});\n\n\nX.util.ViewUpdater = X.extend(X.util.Observer,{\n\tinitialize: function(config){\n\t\tthis.config = {\n\t\t\tclear: true,\n\t\t\tajax: {\n\t\t\t\tcontext: this,\n\t\t\t\ttimeout: 10000,\n\t\t\t\tdataType: 'html',\n\t\t\t\tsuccess: this.success,\n\t\t\t\terror: this.error\n\t\t\t}\n\t\t};\n\t\t\n\t\tX.apply(true, this.config, config);\n\n\t\tvar listener = {};\n\t\tif(this.config.listener){\n\t\t\tlistener = this.config.listener;\n\t\t}\n\t\tX.util.ViewUpdater.base.initialize.call(this, listener);\n\t},\n\tsend: function(config){\n\t\tconfig = X.apply(config, this.config.ajax);\n\t\tvar xhr = $.ajax(config);\n\n\t\tvar params = { };\n\t\tparams.url = config.url;\n\t\tif(config.hasOwnProperty('transition')){\n\t\t\tparams.transition = config.transition;\n\t\t}\n\t\tif(config.hasOwnProperty('history')){\n\t\t\tparams.history = config.history;\n\t\t}\n\t\txhr.params = params;\n\t},\n\tsuccess: function(data, status, xhr){\n\t\tthis.config.vc.success(data, xhr.params);\n\t},\n\terror: function(xhr, status){\n\t\tthis.config.vc.error(xhr);\n\t}\n});\n\nX.util.cm.addCString('viewupdater', X.util.ViewUpdater);\n\nX.View = X.extend(X.util.Observer, {\n\tinitialize: function(config){\n\t\tthis.config = {\n\t\t\tel: null,\n\t\t\twidth: 200,\n\t\t\theight: 200,\n\t\t\tautoSize: true,\n\t\t\tscroll: true,\n\t\t\tscrollConfig: { },\n\t\t\tcontent: null,\n\t\t\titems: [ ],\n\t\t\ttoolbars: [ ],\n\t\t\tfloating: false,\n\t\t\toverlay: false,\n\t\t\tviewController: null,\n\t\t\tlayout: 'y',\n\t\t\tflexible: true,\n\t\t\tpanels: null,\n\t\t\tclassName: null,\n\t\t\tstyle: null\n\t\t};\n\t\tX.apply(true, this.config, config);\n\n\t\tvar listener = { };\n\t\tif(this.config.listener){\n\t\t\tlistener = this.config.listener;\n\t\t}\n\t\tX.View.base.initialize.call(this, listener);\n\n\t\tif(!this.config.el){\n\t\t\tthis.config.el = {\n\t\t\t\ttag: 'div',\n\t\t\t\tid: this.config.id\n\t\t\t};\n\t\t}\n\t\tthis.el = X.util.em.get(this.config.el);\n\t\tX.util.cm.set(this.el.get(0).id, this);\n\t\t\t\n\t\tthis.body = this.el.wrapInner(\n\t\t\tX.util.em.get().addClass('ui-view-body')\n\t\t).children();\n\n\t\tif(this.config.autoRender){\n\t\t\tthis.render();\n\t\t}\n\t},\n\trender: function(){\n\t\tthis.fireEvent(this, 'beforerender', [this]);\n\t\tthis.el.addClass('ui-view');\n\n\t\tthis.setLayout(this.config.layout);\n\t\tthis.setSize(this.config.autoSize);\n\n\t\tif(this.config.className){\n\t\t\tthis.el.addClass(this.config.className);\n\t\t}\n\n\t\tif(this.config.style){\n\t\t\tthis.el.css(this.config.style);\n\t\t}\n\n\t\tif(this.config.toolbars.length > 0){\n\t\t\tthis.addToolbar(this.config.toolbars);\n\t\t}\n\n\t\tif(this.config.content){\n\t\t\tthis.setContent(this.config.content);\n\t\t}\n\t\t\n\t\tif(this.config.items.length > 0){\n\t\t\tthis.add(this.config.items);\n\t\t}\n\n\t\tif(this.config.viewController){\n\t\t\tthis.setViewController(this.config.viewController);\n\t\t}\n\t\t\n\t\tif(this.config.floating){\n\t\t\tthis.setFloating(this.config.floating);\n\t\t}\n\t\t\n\t\tif(this.config.panels){\n\t\t\tthis.panelsCreate(this.config.panels);\n\t\t}\t\n\n\t\tthis.setFlexible(this.config.flexible);\n\t\tthis.scrollCreate(this.config.scroll);\n\n\t\tX.getWindow().on(X.events.orientationchange, { me: this }, this.onOrientationChange);\n\n\t\tthis.fireEvent(this, 'afterrender', [this]);\n\t},\n\tscrollRefresh: function(){\n\t\tif(this.scroll){\n\t\t\tthis.scroll.refresh();\n\t\t}\n\t},\n\tpanelsCreate: function(panels){\n\t\tif(panels.left){\n\t\t\tthis.panelsLeft = X.util.em.get()\n\t\t\t\t.addClass('ui-view-panels-left');\n\t\t\t\n\t\t\tthis.el.append(this.panelsLeft);\n\t\t\t\n\t\t\tX.util.cm.create(this.panelsLeft, [panels.left]);\n\t\t}\n\t\t\n\t\tif(panels.right){\n\t\t\tthis.panelsRight = X.util.em.get()\n\t\t\t\t.addClass('ui-view-panels-right');\n\t\t\t\n\t\t\tthis.el.append(this.panelsRight);\n\t\t\t\n\t\t\tX.util.cm.create(this.panelsRight, [panels.right]);\n\t\t}\t\t\n\t\t\n\t\tthis.body.addClass('ui-view-panels ui-view-panels-close');\n\t},\n\tpanelsOpen: function(type){\n\t\tif(this.panelsRight || this.panelsLeft){\n\t\t\tthis.body.removeClass('ui-view-panels-close').addClass('ui-view-panels-open-' + type);\n\t\t\t\n\t\t\tthis.fireEvent(this, 'panelsopen', [this]);\n\t\t}\n\t},\n\tpanelsClose: function(){\n\t\tif(this.panelsRight || this.panelsLeft){\n\t\t\tthis.body.removeClass('ui-view-panels-open').addClass('ui-view-panels-close');\n\t\t\t\n\t\t\tthis.fireEvent(this, 'panelsclose', [this]);\n\t\t}\n\t},\n\tpanelsToggle: function(type){\n\t\tif(this.panelsRight || this.panelsLeft){\n\t\t\tif(this.body.hasClass('ui-view-panels-close')){\n\t\t\t\tthis.panelsOpen(type);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.panelsClose(type);\n\t\t\t}\n\t\t}\n\t},\n\tsetContent: function(content){\n\t\tvar reg = /^#/;\n\t\tif(X.type(content) === 'string' && reg.test(content)){\n\t\t\tcontent = $(content);\n\t\t\tif(this.body.children('.ui-scrollview-view').length > 0){\n\t\t\t\tthis.body.children('.ui-scrollview-view').html(content);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.body.html(content);\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tif(this.body.children('.ui-scrollview-view').length > 0){\n\t\t\t\tthis.body.children('.ui-scrollview-view').html(content);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.body.html(content);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.createHtmlComponent();\n\t},\n\tsetLayout: function(layout){\n\t\tif(layout === \"x\"){\n\t\t\tthis.el.addClass(\"ui-view-horizontal\");\n\t\t\tthis.body.removeClass(\"ui-view-body-vertical\")\n\t\t\t\t.addClass(\"ui-view-body-horizontal\");\n\t\t}\n\t\telse if(layout === \"y\"){\n\t\t\tthis.body.removeClass(\"ui-view-body-horizontal\")\n\t\t\t\t.addClass('ui-view-body-vertical');\n\t\t}\n\t},\n\tsetFlexible: function(flex){\n\t\tif(flex){\n\t\t\tthis.el.removeClass('ui-view-inflexible')\n\t\t\t\t.addClass('ui-view-flexible');\n\t\t}\n\t\telse{\n\t\t\tthis.el.removeClass('ui-view-flexible')\n\t\t\t\t.addClass('ui-view-inflexible');\n\t\t}\n\t},\n\tsetSize: function(autoSize){\n\t\tthis.setWidth(autoSize);\n\t\tthis.setHeight(autoSize);\n\t},\n\tsetWidth: function(width){\n\t\tif(X.type(width) !== 'boolean' || width !== true){\n\t\t\tthis.setFlexible(false);\n\t\t\tvar w = width || this.config.width;\n\t\t\tthis.el.width(w);\n\t\t}\n\t},\n\tsetHeight: function(height){\n\t\tif(X.type(height) !== 'boolean' || height !== true){\n\t\t\tthis.setFlexible(false);\n\t\t\tvar h = height || this.config.height;\n\t\t\tthis.el.height(h)\n\t\t\t\t.css('min-height', h);\n\t\t}\n\t},\n\tgetWidth: function(){\n\t\tvar width = this.el.outerWidth();\n\t\treturn width;\n\t},\n\tgetHeight: function(){\n\t\tvar height = this.el.outerHeight();\n\t\treturn height;\n\t},\n\tscrollCreate: function(scroll){\n\t\tif(scroll){\n\t\t\tthis.scroll = new iScroll(this.body.get(0), this.config.scrollConfig);\n\t\t}\n\t},\n\tscrollDestroy: function(){\n\t\tif(this.scroll){\n\t\t\tthis.scroll.destroy();\n\t\t}\n\t},\n\tonOrientationChange: function(e){\n\t\tvar me = e.data.me;\n\t\tme.fireEvent(me, 'orientationchange', []);\n\t},\n\tshow: function(transition){\n\t\tif(!this.el.hasClass('ui-view-hide')){\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.config.floating){\n\t\t\tif(this.config.floating){\n\t\t\t\tvar style = this.el.get(0).style;\n\t\t\t\tthis.el.css({\n\t\t\t\t\tmarginTop: -(parseInt(style.height) / 2),\n\t\t\t\t\tmarginLeft: -(parseInt(style.width) / 2)\n\t\t\t\t});\n\t\t\t}\n\t\t\tif(this.overlay){\n\t\t\t\tthis.overlay.show();\n\t\t\t}\n\t\t}\n\n\t\tthis.el.removeClass('ui-view-hide');\n\n\t\tif(transition){\n\t\t\tthis.el.addClass('pop in').animationComplete(function(){\n\t\t\t\tthis.className = this.className.replace('pop in', '');\n\t\t\t});\n\t\t}\t\n\t\tthis.fireEvent(this, 'show', [this]);\n\n\t\treturn this;\n\t},\n\thide: function(transition){\n\t\tif(this.el.hasClass('ui-view-hide')){\n\t\t\treturn;\n\t\t}\n\n\t\tif(transition){\n\t\t\tthis.el.addClass('out').animationComplete(function(){\n\t\t\t\tthis.className = this.className.replace('out', '') + 'ui-view-hide';\n\t\t\t});\n\t\t}\n\t\telse{\n\t\t\tthis.el.addClass('ui-view-hide');\n\t\t}\n\t\t\n\t\t\n\t\tif(this.config.floating && this.overlay){\n\t\t\tthis.overlay.hide();\n\t\t}\n\n\t\tthis.fireEvent(this, 'hide', [this]);\n\t\treturn this;\n\t},\n\ttoggle: function(){\n\t\tif(this.el.hasClass('ui-view-hide')){\n\t\t\tthis.show();\n\t\t}\n\t\telse{\n\t\t\tthis.hide();\n\t\t}\n\t},\n\tgetEl: function(){\n\t\treturn this.el;\n\t},\n\tgetId: function(){\n\t\treturn this.el.attr('id');\n\t},\n\tgetViewController: function(){\n\t\treturn this.config.viewController;\n\t},\n\tsetViewController: function(vc){\n\t\tif(X.type(vc) === 'string'){\n\t\t\tvc = X.util.ViewController.get(vc);\n\t\t}\n\n\t\tif(!vc){\n\t\t\tnew Error('arguments is unknow');\n\t\t}\n\n\t\tvc.init(this);\n\t\tthis.config.viewController = vc;\n\t},\n\tdestroy: function(){\n\t\tthis.el.remove();\n\t\tX.getWindow().off(X.events.orientationchange, this.onOrientationChange);\n\n\t\tthis.fireEvent(this, 'destroy', [this]);\n\t},\n\tadd: function(comps){\n\t\tvar el = this.body.children('.ui-scrollview-view');\n\t\tif(el.length < 1){\n\t\t\tel = this.body;\n\t\t}\n\t\tcomps = X.util.cm.create(el, comps);\n\t\tthis.config.items = $.unique(this.config.items.concat(comps));\n\t\tthis.config.items.reverse();\n\t\t\n\t\treturn comps;\n\t},\n\tremove: function(index){\n\t\tthis.config.items[index].destroy();\n\t\tthis.config.items.remove(index);\n\t},\n\taddToolbar: function(toolbars){\n\t\ttoolbars = X.util.cm.create(this.el, toolbars);\n\t\tthis.config.toolbars.push(toolbars);\n\n\t\treturn toolbars;\n\t},\n\tsetFloating: function(float){\n\t\tif(float){\n\t\t\tthis.config.floating = float;\n\t\t\tthis.el.addClass('ui-view-floating ui-view-hide');\n\t\t}\n\t\telse{\n\t\t\tthis.el.removeClass('ui-view-floating ui-view-hide');\n\t\t}\t\t\n\t\tthis.setOverlay(this.config.overlay);\n\t},\n\tsetOverlay: function(overlay){\n\t\tif(overlay){\n\t\t\tif(this.config.floating){\n\t\t\t\tthis.overlay = X.util.em.get().addClass('ui-overlay');\n\t\t\t\tX.getBody().append(this.overlay);\n\t\t\t\tthis.overlay.bind('vclick', { me: this }, function(e){\n\t\t\t\t\tvar me = e.data.me;\n\t\t\t\t\tme.hide();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse{\n\t\t\t\tif(this.overlay){\n\t\t\t\t\tthis.overlay.remove();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tif(this.overlay){\n\t\t\t\tthis.overlay.remove();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.config.overlay = overlay;\n\t},\n\tcreateHtmlComponent: function(){\n\t\tvar\tviews = this.el.find('[data-role=\"view\"]');\n\t\tviews.each(function(){\n\t\t\tvar el = $(this);\n\n\t\t\tvar dataset = this.dataset,\n\t\t\t\tconfig = { }, val, panels = { };\n\t\t\t\n\t\t\tfor(attr in dataset){\n\t\t\t\tif(dataset[attr] === \"true\" \n\t\t\t\t\t|| dataset[attr] === \"false\"\n\t\t\t\t\t|| parseFloat(dataset[attr])\n\t\t\t\t\t|| /^\\{(.*?)\\}$/.test(attr)){\n\t\t\t\t\tval = JSON.parse(dataset[attr]);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tval = dataset[attr];\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconfig[attr] = val;\n\t\t\t}\n\t\t\t\n\t\t\tconfig.el = el;\n\t\t\tconfig.autoRender = true;\n\n\t\t\tnew X.View(config);\n\t\t});\n\n\t\tvar panels = this.el.find('[data-role=\"view\"][data-panels=\"true\"]');\n\t\tpanels.each(function(){\n\t\t\tvar id = this.id,\n\t\t\t\tview = X.util.cm.get(id),\n\t\t\t\tpanels = { }, left, right;\n\n\t\t\tif(!view.scroll){\n\t\t\t\tleft = view.body.children('[data-role=\"view\"][data-panels=\"left\"]');\n\t\t\t\tright = view.body.children('[data-role=\"view\"][data-panels=\"right\"]');\n\n\t\t\t\tif(left.length > 0){\n\t\t\t\t\tpanels.left = X.util.cm.get(left.get(0).id);\n\t\t\t\t}\n\n\t\t\t\tif(right.length > 0){\n\t\t\t\t\tpanels.right = X.util.cm.get(right.get(0).id);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tview.panelsCreate(panels);\n\t\t});\n\t\t\n\n\t\tvar\tcomps = this.el.find('[data-role]').not('[data-role=\"view\"]');\n\t\tvar charts = [];\n\t\t\n\t\tcomps.each(function(){\n\t\t\tvar el = $(this),\n\t\t\t\tcomp = el.data('role');\n\n\t\t\tvar dataset = this.dataset,\n\t\t\t\tconfig = { }, val;\n\t\t\t\n\t\t\tfor(attr in dataset){\n\t\t\t\tif(dataset[attr] === \"true\" \n\t\t\t\t\t|| dataset[attr] === \"false\"\n\t\t\t\t\t|| parseFloat(dataset[attr])\n\t\t\t\t\t|| /^\\{(.*?)\\}$/.test(attr)){\n\t\t\t\t\tval = JSON.parse(dataset[attr]);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tval = dataset[attr];\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconfig[attr] = val;\n\t\t\t}\n\t\t\t\n\t\t\tconfig.el = el;\n\t\t\tconfig.autoRender = true;\n\n\t\t\tif(comp === 'toolbar'){\n\t\t\t\tel.parents('.ui-view').eq(0).prepend(el);\n\t\t\t\tconfig.title = el.html();\n\t\t\t\tel.empty();\n\t\t\t\tnew X.ui.Toolbar(config);\n\t\t\t}\n\n\t\t\tif(comp === 'tabs'){\n\t\t\t\tvar tabs = el.children('[data-role=\"view\"]'),\n\t\t\t\t\titems = [ ], titles = [ ];\n\t\t\t\t\n\t\t\t\ttabs.each(function(){\n\t\t\t\t\titems.push(X.util.cm.get(this.id));\n\t\t\t\t\ttitles.push(this.dataset.title);\n\t\t\t\t});\n\n\t\t\t\tconfig.items = items;\n\t\t\t\tconfig.titles = titles;\n\t\t\t\t\n\t\t\t\tnew X.ui.Tabs(config);\n\t\t\t}\n\n\t\t\tif(comp === 'carousel'){\n\t\t\t\tvar views = el.children('[data-role=\"view\"]'),\n\t\t\t\t\titems = [ ];\n\t\t\t\t\n\t\t\t\tviews.each(function(){\n\t\t\t\t\titems.push(X.util.cm.get(this.id));\n\t\t\t\t});\n\n\t\t\t\tconfig.items = items;\n\t\t\t\tnew X.ui.Carousel(config);\n\t\t\t}\n\n\t\t\tif(comp === 'listview'){\n\t\t\t\tnew X.ui.ListView(config);\n\t\t\t}\n\n\t\t\tif(comp === 'accordion'){\n\t\t\t\tvar views = el.children('[data-role=\"view\"]'),\n\t\t\t\t\titems = [ ], titles = [ ];\n\n\t\t\t\tviews.each(function(i){\n\t\t\t\t\titems.push(X.util.cm.get(this.id));\n\t\t\t\t\ttitles.push(this.dataset.title);\n\t\t\t\t});\n\n\t\t\t\tconfig.items = items;\n\t\t\t\tconfig.titles = titles;\n\n\t\t\t\tnew X.ui.Accordion(config);\n\t\t\t}\n\n\t\t\tif(comp === 'textbox'){\n\t\t\t\tnew X.ui.TextBox(config);\n\t\t\t}\n\n\t\t\tif(comp === 'slider'){\n\t\t\t\tnew X.ui.Slider(config);\n\t\t\t}\n\n\t\t\tif(comp === 'progress'){\n\t\t\t\tnew X.ui.Progressbar(config);\n\t\t\t}\n\n\t\t\tif(comp === 'spinner'){\n\t\t\t\tnew X.ui.Spinner(config);\n\t\t\t}\n\n\t\t\tif(comp === 'switchbox'){\n\t\t\t\tnew X.ui.SwitchBox(config);\n\t\t\t}\n\n\t\t\tif(comp === 'checkbox'){\n\t\t\t\tnew X.ui.CheckBox(config);\n\t\t\t}\n\t\t\t\n\t\t\tif(comp === 'radiobox'){\n\t\t\t\tnew X.ui.RadioBox(config);\n\t\t\t}\n\t\t\t\n\t\t\tif(comp === 'selectbox'){\n\t\t\t\tnew X.ui.SelectBox(config);\n\t\t\t}\n\t\t});\n\n\t\tvar\tformView = this.el.find('[data-role=\"formview\"]');\n\t\tformView.each(function(){\n\t\t\tvar el = $(this),\n\t\t\t\titems = [],\n\t\t\t\tselector = '[data-role=\"textbox\"],' +\n\t\t\t\t\t'[data-role=\"slider\"],' +\n\t\t\t\t\t'[data-role=\"spinner\"],' + \n\t\t\t\t\t'[data-role=\"switchbox\"],' +\n\t\t\t\t\t'[data-role=\"progress\"]';\n\t\t\t\n\t\t\tvar dataset = this.dataset,\n\t\t\t\tconfig = { }, val, panels = { };\n\t\t\t\n\t\t\tfor(attr in dataset){\n\t\t\t\tif(dataset[attr] === \"true\" \n\t\t\t\t\t|| dataset[attr] === \"false\"\n\t\t\t\t\t|| parseFloat(dataset[attr])\n\t\t\t\t\t|| /^\\{(.*?)\\}$/.test(attr)){\n\t\t\t\t\tval = JSON.parse(dataset[attr]);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tval = dataset[attr];\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconfig[attr] = val;\n\t\t\t}\n\n\t\t\tel.children(selector).each(function(){\n\t\t\t\titems.push(X.util.cm.get(this.id));\n\t\t\t});\n\n\t\t\tconfig.el = el;\n\t\t\tconfig.items = items;\n\t\t\tconfig.autoRender = true;\n\n\t\t\tnew X.ui.FormView(config);\n\t\t});\n\t}\t\n});\n\nX.util.cm.addCString('view', X.View);\n\n\n\n\n\nX.ui = { };\n\n\n\nX.ui.ListView = X.extend(X.View, {\n\tinitialize: function(config){\n\t\tthis.config = {\n\t\t\tscrollConfig: {\n\t\t\t\tdirection: 'y'\n\t\t\t}\n\t\t};\n\t\tX.apply(this.config, config);\n\t\tX.ui.ListView.base.initialize.call(this, this.config);\n\t},\n\trender: function(){\n\t\tX.ui.ListView.base.render.call(this);\n\t\tthis.el.addClass('ui-listview');\n\n\t\tthis.ul = this.body.children('.ui-scrollview-view').children('ul');\n\t\tthis.ul.children('li').addClass('ui-listview-item');\n\n\t\tthis.ul.on('vclick', 'li', {me: this}, this.rowClick);\n\t\tthis.scrollEvent();\n\t},\n\tscrollEvent: function(){\n\t\tvar me = this;\n\t\tthis.scroll.options.onScrollStart = function(){\n\t\t\t\n\t\t};\n\n\t\tthis.scroll.options.onScrollMove = function(){\n\t\t\t\n\t\t}\n\n\t\tthis.scroll.options.onAnimationDoing = function(){\n\t\t\t\n\t\t};\n\n\t\tthis.scroll.options.onScrollEnd = function(){\n\t\t\t\n\t\t};\n\t},\n\trowClick: function(e){\n\t\tvar me = e.data.me;\n\t\tme.fireEvent(me, 'rowclick', [me, this]);\n\t},\n\tappend: function(rows){\n\t\tvar type = X.type(row);\n\t\tif(type === 'string'){\n\t\t\trows = $(rows).addClass('ui-listview-item');\n\t\t}\n\t\telse if(type === 'jquery'){\n\t\t\trows.addClass('ui-listview-item');\n\t\t}\n\n\t\tthis.ul.append(rows);\n\t\tthis.scrollRefresh();\n\t},\n\tprepend: function(rows){\n\t\tvar type = X.type(rows);\n\t\tif(type === 'string'){\n\t\t\trows = $(rows).addClass('ui-listview-item');\n\t\t}\n\t\telse if(type === 'jquery'){\n\t\t\trows.addClass('ui-listview-item');\n\t\t}\n\n\t\tthis.ul.prepend(rows);\n\t\tthis.scrollRefresh();\n\t},\n\treplaceWith: function(index, row){\n\t\tif(X.type(index) !== 'number'){\n\t\t\tthrow new Error('arguments must be number ');\n\t\t}\n\n\t\tvar type = X.type(row);\n\t\tif(type === 'string'){\n\t\t\trow = $(row).addClass('ui-listview-item');\n\t\t}\n\t\telse if(type === 'jquery'){\n\t\t\trow.addClass('ui-listview-item');\n\t\t}\n\t\n\t\tthis.ul.children('li:eq(' + index + ')').replaceWith(row);\n\t},\n\tremove: function(index){\n\t\tif(X.type(index) !== 'number'){\n\t\t\tthrow new Error('arguments must be number ');\n\t\t}\n\t\tthis.ul.children('li:eq(' + index + ')').remove();\n\t\tthis.scrollRefresh();\n\t}\n});\n\nX.util.cm.addCString('listview', X.ui.ListView);\n\n/*\nX.ui.ListView = X.extend(X.View, {\n\tinitialize: function(config){\n\t\tthis.config = {\n\t\t\tscrollConfig: {\n\t\t\t\tdirection: 'y'\n\t\t\t}\n\t\t};\n\t\tX.apply(this.config, config);\n\t\tX.ui.ListView.base.initialize.call(this, this.config);\n\t},\n\trender: function(){\n\t\tX.ui.ListView.base.render.call(this);\n\t\tthis.el.addClass('ui-listview');\n\n\t\tthis.ul = this.body.children('.ui-scrollview-view').children('ul');\n\t\tthis.lis = this.ul.children('li').addClass('ui-listview-item');\n\t\t//this.lis.css(\"position\", \"absolute\");\n\n\t\tthis.scrollEvent();\n\t},\n\tscrollEvent: function(){\n\t\tvar me = this;\n\n\t\tthis.bodyHeight = this.getHeight();\n\t\tthis.rowHeight = this.ul.children('li').outerHeight();\n\t\tthis.lis = this.ul.children('li');\n\t\t\n\t\tthis.lis.css('-webkit-transform', 'translate3d(0px, 0px, 0px)');\n\t\tthis.ul.height(this.ul.height());\n\t\tthis.ul.empty();\n\n\t\tthis.count = parseInt(this.bodyHeight / this.rowHeight) + 2;\n\t\tthis.lis.css('position', 'absolute');\n\n\n\t\tfunction fn(){\n\t\t\tvar y = this.y * -1;\n\t\t\tvar start = parseInt(y / me.rowHeight, 10) ;\n\t\t\tif(start < 0){\n\t\t\t\tstart = 0;\n\t\t\t}\n\n\t\t\tme.bind(start, (start + me.count));\n\t\t};\n\n\n\t\tthis.scroll.options.onScrollMove = fn;\n\t\tthis.scroll.options.onAnimationDoing = fn;\n\n\t\tthis.bind(0, this.count);\n\t},\n\tbind: function(start, end){\n\t\tvar me = this;\n\t\tvar lis = this.lis.slice(start, end).each(function(i){\n\t\t\tthis.style.webkitTransform = 'translate3d(0px, ' + ((start + i) * me.rowHeight) + 'px, 0px)';\n\t\t});\n\t\tme = null;\n\n\t\tthis.ul.html(lis);\n\t},\n\tappend: function(rows){\n\t\tvar type = X.type(row);\n\t\tif(type === 'string'){\n\t\t\trows = $(rows).addClass('ui-listview-item');\n\t\t}\n\t\telse if(type === 'jquery'){\n\t\t\trows.addClass('ui-listview-item');\n\t\t}\n\n\t\tthis.ul.append(rows);\n\t\tthis.scrollRefresh();\n\t},\n\tprepend: function(rows){\n\t\tvar type = X.type(rows);\n\t\tif(type === 'string'){\n\t\t\trows = $(rows).addClass('ui-listview-item');\n\t\t}\n\t\telse if(type === 'jquery'){\n\t\t\trows.addClass('ui-listview-item');\n\t\t}\n\n\t\tthis.ul.prepend(rows);\n\t\tthis.scrollRefresh();\n\t},\n\treplaceWith: function(index, row){\n\t\tif(X.type(index) !== 'number'){\n\t\t\tthrow new Error('arguments must be number ');\n\t\t}\n\n\t\tvar type = X.type(row);\n\t\tif(type === 'string'){\n\t\t\trow = $(row).addClass('ui-listview-item');\n\t\t}\n\t\telse if(type === 'jquery'){\n\t\t\trow.addClass('ui-listview-item');\n\t\t}\n\t\n\t\tthis.ul.children('li:eq(' + index + ')').replaceWith(row);\n\t},\n\tremove: function(index){\n\t\tif(X.type(index) !== 'number'){\n\t\t\tthrow new Error('arguments must be number ');\n\t\t}\n\t\tthis.ul.children('li:eq(' + index + ')').remove();\n\t\tthis.scrollRefresh();\n\t}\n});\n\nX.util.cm.addCString('listview', X.ui.ListView);\n*/\n\n\n\nX.ui.Accordion = X.extend(X.View, {\n\tinitialize: function(config){\n\t\tthis.config = {\n\t\t\ttitles: [],\n\t\t\titems: [],\n\t\t\tscroll: false,\n\t\t\tactiveIndex: 0\n\t\t};\n\t\tX.apply(this.config, config);\n\t\tX.ui.Accordion.base.initialize.call(this, this.config);\n\t},\n\trender: function(){\n\t\tX.ui.Accordion.base.render.call(this);\n\t\tthis.el.addClass('ui-accordion');\n\t\t\n\t\tthis.createItems();\n\t\tthis.createTitle();\n\n\t\tviews = this.body.on('vclick', '.ui-accordion-views > .ui-accordion-title', { me: this }, function(e){\n\t\t\tvar me = e.data.me;\n\t\t\t\n\t\t\tvar index = me.body.children('.ui-accordion-views').index($(this).parent());\n\t\t\tme.change(index);\n\t\t\treturn false;\n\t\t});\n\t},\n\tcreateItems: function(){\n\t\tthis.body.children('.ui-view').each(function(){\n\t\t\tvar div = X.util.em.get()\n\t\t\t\t.addClass('ui-accordion-views ui-accordion-close');\n\t\t\t\n\t\t\t$(this).wrap(div);\n\t\t});\n\n\t\tvar items = this.body.children('.ui-accordion-views');\n\t\titems.eq(this.config.activeIndex)\n\t\t\t.removeClass('ui-accordion-close')\n\t\t\t.addClass('ui-accordion-open');\n\n\t\tvar me = this;\n\t\tthis.config.items.forEach(function(view, i){\n\t\t\tif(me.config.activeIndex !== i){\n\t\t\t\tview.hide();\n\t\t\t}\n\t\t});\n\t},\n\tcreateTitle: function(){\n\t\tvar views = this.body.children('.ui-accordion-views'),\n\t\t\ttitles = this.config.titles;\n\t\tviews.each(function(i){\n\t\t\tif(titles[i]){\n\t\t\t\tdiv = X.util.em.get()\n\t\t\t\t\t.addClass('ui-accordion-title')\n\t\t\t\t\t.html(titles[i]);\n\t\t\t\t\n\t\t\t\t$(this).prepend(div);\n\t\t\t}\n\t\t});\n\n\t\ttitles = null;\t\t\n\t},\n\tchange: function(index){\n\t\tif(this.config.activeIndex === index){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.body.children('.ui-accordion-views')\n\t\t\t.removeClass('ui-accordion-open')\n\t\t\t.addClass('ui-accordion-close')\n\t\t\t.eq(index).addClass('ui-accordion-open')\n\t\t\t.removeClass('ui-accordion-close');\n\n\n\t\tthis.config.items.forEach(function(view, i){\n\t\t\tif(index !== i){\n\t\t\t\tview.hide();\n\t\t\t}\n\t\t\telse{\n\t\t\t\tview.show();\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.config.activeIndex = index;\n\n\t\tthis.fireEvent(this, 'change', [this]);\n\t},\n\tappend: function(comp, title){\n\t\tvar div = X.util.em.get()\n\t\t\t\t.addClass('ui-accordion-views ui-accordion-close');\n\n\t\tvar titleDiv = X.util.em.get()\n\t\t\t\t\t.addClass('ui-accordion-title')\n\t\t\t\t\t.html(title);\n\n\t\tthis.body.append(div);\n\t\tcomp = X.util.cm.create(div, [comp]);\n\t\tdiv.prepend(titleDiv);\n\n\t\tthis.config.activeIndex = null;\n\n\t\treturn [comp[0], title];\n\t},\n\tprepend: function(comp, title){\n\t\tvar div = X.util.em.get()\n\t\t\t\t.addClass('ui-accordion-views ui-accordion-close');\n\n\t\tvar titleDiv = X.util.em.get()\n\t\t\t\t\t.addClass('ui-accordion-title')\n\t\t\t\t\t.html(title);\n\n\t\tthis.body.prepend(div);\n\t\tcomp = X.util.cm.create(div, [comp]);\n\t\tdiv.prepend(titleDiv);\n\n\t\tthis.config.activeIndex = null;\n\n\t\treturn [comp[0], title];\n\t},\n\tremove: function(index){\n\t\tthis.body.children('.ui-accordion-views').eq(index).remove();\n\t\tthis.config.items = this.config.items.filter(function(el, i){\n\t\t\treturn (index !== i);\n\t\t});\n\n\t\tthis.config.titles = this.config.titles.filter(function(el, i){\n\t\t\treturn (index !== i);\n\t\t});\n\t\tthis.config.activeIndex = null;\n\t},\n\tremoveAll: function(){\n\t\tthis.body.empty();\n\t\tthis.config.activeIndex = null;\n\t},\n\tchangeTitle: function(title, index){\n\t\tindex = index || 0;\n\t\tvar view = this.body.children('.ui-accordion-views')\n\t\t\t.eq(index);\n\t\t\n\t\tview\n\t\t\t.children('.ui-accordion-title')\n\t\t\t.html(title);\n\t\t\n\t\tthis.config.titles[index] = title;\n\t},\n\tgetItem: function(index){\n\t\treturn this.config.items[index];\n\t}\n});\n\nX.util.cm.addCString('accordion', X.ui.Accordion);\n\n\nX.ui.Toolbar = X.extend(X.util.Observer, {\n\tinitialize: function(config){\n\t\tthis.config = {\n\t\t\tposition: 'top',\n\t\t\ttitle: null\n\t\t};\n\t\tX.apply(this.config, config);\n\t\t\n\t\tvar listener = { };\n\t\tif(this.config.listener){\n\t\t\tlistener = this.config.listener;\n\t\t}\n\t\tX.ui.Toolbar.base.initialize.call(this, listener);\n\t\t\n\t\tif(!this.config.el){\n\t\t\tthis.config.el = {\n\t\t\t\ttag: 'div',\n\t\t\t\tid: this.config.id\n\t\t\t};\n\t\t}\n\t\tthis.el = X.util.em.get(this.config.el);\n\t\t\n\t\tif(!X.util.cm.get(this.el.get(0).id)){\n\t\t\tX.util.cm.set(this.el.get(0).id, this);\n\t\t}\n\n\t\tif(this.config.autoRender){\n\t\t\tthis.render();\n\t\t}\n\t},\n\trender: function(){\n\t\tthis.fireEvent(this, 'beforerender', [this]);\n\t\t\n\t\tthis.el.addClass('ui-toolbar ' + this.config.position);\n\n\t\tthis.inner = X.util.em.get()\n\t\t\t.addClass('ui-toolbar-inner');\n\n\t\tthis.el.append(this.inner);\n\n\t\tthis.setTitle(this.config.title);\n\t\t\n\t\tvar parent = this.el.parent();\n\t\tif(this.config.position === 'bottom'){\n\t\t\tparent.append(this.el);\n\t\t}\n\t\telse{\n\t\t\tparent.prepend(this.el);\n\t\t}\n\t\t\n\t\tthis.fireEvent(this, 'afterrender', [this]);\n\t},\n\tsetTitle: function(title){\n\t\tif(!this.title){\n\t\t\tthis.title = X.util.em.get().\n\t\t\t\taddClass('ui-toolbar-title');\n\n\t\t\tthis.inner.append(this.title);\n\t\t\tthis.title.html(title);\n\t\t\treturn;\n\t\t}\n\t\tthis.title.html(title);\n\t\tthis.fireEvent(this, 'changetitle', [this, title]);\n\t},\n\tgetTitle: function(){\n\t\tif(this.title){\n\t\t\treturn this.title.text();\n\t\t}\n\t},\n\tdestroy: function(){\n\t\tthis.el.remove();\n\t}\n});\n\nX.util.cm.addCString('toolbar', X.ui.Toolbar);\n\n\n\nX.ui.Tabs = X.extend(X.View, {\n\tinitialize: function(config){\n\t\tthis.config = {\n\t\t\tposition: 'top',\n\t\t\tactiveIndex: 0,\n\t\t\ttitles: [],\n\t\t\tautoSize: true,\n\t\t\ttransition: 'slide',\n\t\t\tscroll: false,\n\t\t\titems: []\n\t\t};\n\t\tX.apply(this.config, config);\n\t\tX.ui.Tabs.base.initialize.call(this, this.config);\n\t},\n\trender: function(){\n\t\tX.ui.Tabs.base.render.call(this);\n\t\tthis.el.addClass('ui-tabs');\n\n\t\tthis.createTabBar();\n\t\t\n\t\tvar activeIndex = this.config.activeIndex;\n\t\t\n\t\tthis.tabBar\n\t\t\t.children('.ui-tabs-bar-items')\n\t\t\t.eq(activeIndex)\n\t\t\t.addClass('ui-tabs-bar-items-active');\n\t\t\n\t\tthis.activeView = this.config.items[activeIndex];\n\t\tfor(var i=0,len=this.config.items.length; i<len; i++){\n\t\t\tif(i === activeIndex){\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tthis.config.items[i].hide();\n\t\t}\n\t},\n\tcreateTabBar: function(){\n\t\tthis.tabBar = X.util.em.get()\n\t\t\t.addClass('ui-tabs-bar ui-tabs-bar-' + this.config.position);\n\t\t\n\t\tvar items = this.config.items,\n\t\t\tlen = items.length,\n\t\t\to, html = '';\n\n\t\tfor(var i=0; i<len; i++){\n\t\t\thtml += '<div class=\"ui-tabs-bar-items\"><span>' + items[i].config.title + '</span></div>'; \n\t\t}\n\t\tthis.tabBar.html(html);\n\t\t\n\t\tif(this.config.position === 'top'){\n\t\t\tthis.el.prepend(this.tabBar);\n\t\t}\n\t\telse{\n\t\t\tthis.el.append(this.tabBar);\n\t\t}\n\t\t\n\t\tthis.tabBar.on('vclick', '.ui-tabs-bar-items', { me: this }, this._click);\n\t},\n\t_click: function(e){\n\t\tvar me = e.data.me,\n\t\t\tbar = $(this), parent = bar.parent(),\n\t\t\tindex = parent.find('.ui-tabs-bar-items').index(bar);\n\t\t\n\t\tparent.find('.ui-tabs-bar-items').removeClass('ui-tabs-bar-items-active');\n\t\tbar.addClass('ui-tabs-bar-items-active');\n\t\t\n\t\tme.change(index);\n\t\treturn false;\n\t},\n\tchange: function(index){\n\t\tvar fromView = this.getActiveView(),\n\t\t\ttoView = this.config.items[index];\n\t\t\t\n\t\tif(fromView === toView){\n\t\t\treturn;\n\t\t}\t\n\t\n\t\tif(fromView.el.nextAll('#' + toView.getId()).length > 0){\n\t\t\tthis.right(fromView, toView);\n\t\t}\n\t\telse{\n\t\t\tthis.left(fromView, toView);\n\t\t}\n\t},\n\ttransitionStart: function(fromView, toView, transition, reverse){\n\t\tvar deferred = new $.Deferred();\n\n\t\tfunction transitionHandler(fromView, toView, transition, reverse){\n\t\t\tvar viewIn = function(){\n\t\t\t\tvar tel = toView.getEl();\n\t\t\t\ttoView.show();\n\t\t\t\ttel.show().addClass(transition + ' in ' + reverse + ' ui-transitioning');\n\n\t\t\t\tvar fel = fromView.getEl();\n\t\t\t\tfel.addClass(transition + ' out ' + reverse + ' ui-transitioning');\n\n\t\t\t\tif(transition !== 'none'){\n\t\t\t\t\ttel.animationComplete(viewOut);\t\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tviewOut();\n\t\t\t\t}\n\t\t\t},\n\t\t\tviewOut = function(){\n\t\t\t\tvar tel = toView.getEl();\n\t\t\t\ttel.removeClass(transition + ' in ' + reverse + ' ui-transitioning');\n\n\t\t\t\tvar fel = fromView.getEl();\n\t\t\t\tfel.removeClass(transition + ' out ' + reverse + ' ui-transitioning');\n\t\t\t\t\n\t\t\t\tdone();\n\t\t\t},\n\t\t\tdone = function(){\n\t\t\t\tdeferred.resolve(this, [fromView, toView]);\n\n\t\t\t\tfromView = null, toView = null, transition = null, reverse = null;\n\t\t\t};\n\n\t\t\tviewIn();\n\t\t}\n\n\t\ttransitionHandler(fromView, toView, transition, reverse);\n\t\t\n\t\treturn deferred;\n\t},\n\tsetActiveView: function(view){\n\t\tthis.activeView = view;\n\t},\n\tgetActiveView: function(){\n\t\treturn this.activeView;\n\t},\n\tgetActiveViewIndex: function(){\n\t\tvar active = this.getActiveView();\n\t\tfor(var i=0; i<this.config.items.length; i++){\n\t\t\tif(active === this.config.items[i]){\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t},\n\tgetView: function(index){\n\t\treturn this.config.items[index];\n\t},\n\tright: function(fromView, toView){\n\t\tthis.fireEvent(this, 'beforechange', [this, this.getActiveView(), this.getActiveViewIndex(), toView]);\n\n\t\tvar promise = this.transitionStart(fromView, toView, this.config.transition, ''), me = this;\n\t\tpromise.done(function(){\n\t\t\tfromView.hide();\n\t\t\tme.setActiveView(toView);\n\n\t\t\tme.fireEvent(me, 'afterchange', [me.getActiveView(), me.getActiveViewIndex(), fromView]);\n\t\t\tme = null, fromView = null, toView = null;\n\t\t});\n\t},\n\tleft: function(fromView, toView){\n\t\tthis.fireEvent(this, 'beforechange', [this, this.getActiveView(), this.getActiveViewIndex(), toView]);\n\n\t\tvar promise = this.transitionStart(fromView, toView, this.config.transition, 'reverse'), me = this;\n\t\tpromise.done(function(){\n\t\t\tfromView.hide();\n\t\t\tme.setActiveView(toView);\n\n\t\t\tme.fireEvent(me, 'afterchange', [me.getActiveView(), me.getActiveViewIndex(), fromView]);\n\t\t\tme = null, fromView = null, toView = null;\n\t\t});\n\t},\n\tappend: function(comp, title){\n\t\tcomp = X.util.cm.create(this.body, [comp]);\n\t\tthis.config.items.push(comp[0]);\n\t\tcomp[0].hide();\n\n\t\tvar titleDiv = X.util.em.get()\n\t\t\t.addClass('ui-tabs-bar-items')\n\t\t\t.html('<span>' + title + '</span>');\n\n\t\tthis.tabBar.append(titleDiv);\n\t\treturn [comp[0], title];\n\t},\n\tprepend: function(comp, title){\n\t\tcomp = X.util.cm.create(this.body, [comp]);\n\t\tthis.config.items = comp.concat(this.config.items);\n\t\tcomp[0].hide();\n\t\tthis.body.prepend(comp[0].el);\n\n\t\tvar titleDiv = X.util.em.get()\n\t\t\t.addClass('ui-tabs-bar-items')\n\t\t\t.html('<span>' + title + '</span>');\n\n\t\tthis.tabBar.prepend(titleDiv);\n\t\treturn [comp[0], title];\n\t},\n\tremove: function(index){\n\t\tthis.config.items[index].destroy();\n\t\tthis.config.items.remove(index);\n\n\t\tthis.tabBar.children('.ui-tabs-bar-items').eq(index).remove();\n\t}\n});\nX.util.cm.addCString('tabs', X.ui.Tabs);\n\nX.ui.Carousel = X.extend(X.View, {\n\tinitialize: function(config){\n\t\tthis.config = {\n\t\t\tdirection: 'x',\n\t\t\tscroll: false,\n\t\t\tactiveIndex: 0,\n\t\t\tduration: 200\n\t\t};\n\t\tX.apply(this.config, config);\n\t\tX.ui.Carousel.base.initialize.call(this, this.config);\n\n\t\tthis.endPos = 0;\n\t\tthis.dragging = false;\n\t},\n\trender: function(){\n\t\tX.ui.Carousel.base.render.call(this);\n\t\tthis.el.addClass('ui-carousel');\n\t\tthis.carouselBody = X.util.em.get().addClass('ui-carousel-body');\n\n\t\tvar views = this.body.children('.ui-view').addClass('ui-carousel-views'),\n\t\t\tactiveIndex = this.config.activeIndex,\n\t\t\tstyle = this.carouselBody.get(0).style;\n\t\t\n\t\tif(views.length > 0){\n\t\t\tviews.wrapAll(this.carouselBody);\n\t\t}\n\t\telse{\n\t\t\tthis.el.append(this.carouselBody);\n\t\t}\n\n\t\tthis.carouselBody = this.body.children('.ui-carousel-body');\n\t\t\n\t\tif(this.config.direction === 'x'){\n\t\t\tthis.carouselBody.addClass('ui-carousel-horizontal');\n\t\t}\n\t\telse{\n\t\t\tthis.carouselBody.addClass('ui-carousel-vertical');\n\t\t}\n\n\n\t\tif(this.config.direction === 'x'){\n\t\t\tstyle.webkitTransform = 'translate3d(' + ((-1 * activeIndex) * this.getWidth()) + 'px, 0px, 0px)';\n\t\t\tstyle.msTransform = 'translateX(' + ((-1 * activeIndex) * this.getWidth()) + 'px)';\n\t\t\tstyle.transform = 'translate3d(' + ((-1 * activeIndex) * this.getWidth()) + 'px, 0px, 0px)';\n\t\t}\n\t\telse{\n\t\t\tstyle.webkitTransform = 'translate3d(0px, ' + ((-1 * activeIndex) * this.getHeight()) + 'px, 0px)';\n\t\t\tstyle.msTransform = 'translateY(' + ((-1 * activeIndex) * this.getHeight()) + 'px)';\n\t\t\tstyle.transform = 'translate3d(' + ((-1 * activeIndex) * this.getWidth()) + 'px, 0px, 0px)';\n\t\t}\n\n\t\tif(this.config.direction === 'y'){\n\t\t\tvar me = this;\n\t\t\tthis.config.items.forEach(function(view){\n\t\t\t\tview.setHeight(me.getHeight());\n\t\t\t});\n\t\t\tme = null;\n\t\t\t\n\t\t\tX.getWindow().on(X.events.orientationchange, { me: this }, this.resize);\n\t\t}\n\t\t\n\t\tthis.carouselBody.bind(X.events.start, {me: this}, this.onStart);\n\t},\n\tresize: function(e){\n\t\tvar me = e.data.me;\n\t\tme.config.items.forEach(function(view){\n\t\t\tview.setHeight(me.getHeight());\n\t\t});\n\t\tme = null;\n\t\treturn false;\n\t},\n\tonStart: function(e){\n\t\tvar me = e.data.me;\n\n\t\tvar pageX = e.originalEvent.touches ? \n\t\t\t\te.originalEvent.touches[0].pageX : e.originalEvent.pageX,\n\t\t\tpageY = e.originalEvent.touches ? \n\t\t\t\te.originalEvent.touches[0].pageY : e.originalEvent.pageY;\n\n\t\tme.startPageX = pageX;\n\t\tme.startPageY = pageY;\n\t\tme.dragging = true;\n\n\t\tme.carouselBody.on(X.events.move, { me: me }, me.onMove);\n\t\tme.carouselBody.on(X.events.end, { me: me }, me.onEnd);\n\t},\n\tonMove: function(e){\n\t\tvar me = e.data.me;\n\t\t\n\t\tif(me.dragging){\n\t\t\tvar pageX = e.originalEvent.touches ? \n\t\t\t\t\te.originalEvent.touches[0].pageX : e.originalEvent.pageX;\n\n\t\t\tvar\tpageY = e.originalEvent.touches ? \n\t\t\t\t\te.originalEvent.touches[0].pageY : e.originalEvent.pageY;\n\n\t\t\tvar style = me.carouselBody.get(0).style;\n\n\t\t\tme.carouselBody.get(0).style.webkitTransitionDuration = \"0\";\n\t\t\tif(me.config.direction === 'x'){\n\t\t\t\tme.movePos  = (pageX - me.startPageX) + (-1 * me.config.activeIndex) * me.getWidth();\n\t\t\t\tme.moveLimit = Math.abs(pageX - me.startPageX);\n\n\t\t\t\tstyle.webkitTransform = 'translate3d(' + me.movePos + 'px, 0px, 0px)';\n\t\t\t\tstyle.msTransform = 'translateX(' + me.movePos + 'px)';\n\t\t\t\tstyle.transform = 'translate3d(' + me.movePos + 'px, 0px, 0px)';\n\t\t\t}\n\t\t\telse{\n\t\t\t\tme.movePos  = (pageY - me.startPageY) + (-1 * me.config.activeIndex) * me.getHeight();\n\t\t\t\tme.moveLimit = Math.abs(pageY - me.startPageY);\n\n\t\t\t\tstyle.webkitTransform = 'translate3d(0px, ' + me.movePos + 'px, 0px)';\n\t\t\t\tstyle.msTransform = 'translateY(' + me.movePos + 'px)';\n\t\t\t\tstyle.transform = 'translate3d(0px, ' + me.movePos + 'px, 0px)';\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t},\n\tonEnd: function(e){\n\t\tvar me = e.data.me, \n\t\t\tendPos = 0,\n\t\t\tstyle = me.carouselBody.get(0).style;\n\n\t\tif(me.moveLimit > 30){\n\t\t\tif(me.movePos > 0){\n\t\t\t\tme.config.activeIndex = 0;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tif(Math.abs(me.movePos) > Math.abs(me.endPos)){\n\t\t\t\t\tme.config.activeIndex++;\n\t\t\t\t\tif(me.config.activeIndex >= (me.config.items.length - 1)){\n\t\t\t\t\t\tme.config.activeIndex = me.config.items.length - 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tme.config.activeIndex--;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(me.config.activeIndex === 0){\n\t\t\t\tendPos = 0;\n\t\t\t}\n\t\t\telse if(me.config.activeIndex > 0){\n\t\t\t\tif(me.config.direction === 'x'){\n\t\t\t\t\tendPos = (me.getWidth() * me.config.activeIndex) * -1;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tendPos = (me.getHeight() * me.config.activeIndex) * -1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tme.endPos = endPos;\n\t\t}\n\t\telse{\n\t\t\tendPos = me.endPos;\t\n\t\t}\n\t\t\n\t\tstyle.webkitTransitionDuration = me.config.duration + 'ms';\n\t\tif(me.config.direction === 'x'){\n\t\t\tstyle.webkitTransform = 'translate3d(' + endPos + 'px, 0px, 0px)';\n\t\t\tstyle.msTransform = 'translate3d(' + endPos + 'px, 0px, 0px)';\n\t\t\tstyle.transform = 'translate3d(' + endPos + 'px, 0px, 0px)';\n\t\t}\n\t\telse{\n\t\t\tstyle.webkitTransform = 'translate3d(0px, ' + endPos + 'px, 0px)';\n\t\t\tstyle.mozTransform = 'translate3d(0px, ' + endPos + 'px, 0px)';\n\t\t\tstyle.transform = 'translate3d(0px, ' + endPos + 'px, 0px)';\n\t\t}\n\n\t\tme.fireEvent(me, 'change', [me, me.config.activeIndex, me.getActiveView()]);\n\n\t\tme.carouselBody.off(X.events.move);\n\t\tme.carouselBody.off(X.events.end);\n\n\t\tme.dragging = false;\n\t},\n\tgetActiveView: function(){\n\t\treturn this.config.items[this.config.activeIndex];\n\t},\n\tappend: function(comp){\n\t\tvar comps = X.util.cm.create(this.carouselBody, [comp]);\n\t\tthis.config.items.push(comps[0]);\n\t\tcomps[0].addClass('ui-carousel-views');\n\t\t\n\t\treturn comps[0];\n\t},\n\tremove: function(index){\n\t\tthis.config.items[index].destroy();\n\t\tthis.config.items.remove(index);\n\t},\n\tdestroy: function(){\n\t\tX.ui.Carousel.base.destroy.call(this);\n\t\tX.getWindow().off(X.events.orientationchange, { me: this }, this.resize);\n\t},\n\tnext: function(){\n\t\tvar index = this.config.activeIndex + 1,\n\t\t\tstyle = this.carouselBody.get(0).style;\n\n\t\tstyle.webkitTransitionDuration = '200ms';\n\t\tif(this.config.direction === 'x'){\n\t\t\tstyle.webkitTransform = 'translate3d(' + ((-1 * index) * this.getWidth()) + 'px, 0px, 0px)';\n\t\t\tstyle.msTransform = 'translateX(' + ((-1 * index) * this.getWidth()) + 'px)';\n\t\t}\n\t\telse{\n\t\t\tstyle.webkitTransform = 'translate3d(0px, ' + ((-1 * index) * this.getHeight()) + 'px, 0px)';\n\t\t\tstyle.msTransform = 'translateY(' + ((-1 * index) * this.getHeight()) + 'px)';\n\t\t}\n\n\t\tthis.config.activeIndex = index;\n\t\tthis.fireEvent(this, 'change', [this, this.config.activeIndex, this.getActiveView()]);\n\t},\n\tprev: function(){\n\t\tvar index = this.config.activeIndex - 1,\n\t\t\tstyle = this.carouselBody.get(0).style;\n\n\t\tstyle.webkitTransitionDuration = '200ms';\n\t\tif(this.config.direction === 'x'){\n\t\t\tstyle.webkitTransform = 'translate3d(' + ((-1 * index) * this.getWidth()) + 'px, 0px, 0px)';\n\t\t\tstyle.msTransform = 'translateX(' + ((-1 * index) * this.getWidth()) + 'px)';\n\t\t}\n\t\telse{\n\t\t\tstyle.webkitTransform = 'translate3d(0px, ' + ((-1 * index) * this.getHeight()) + 'px, 0px)';\n\t\t\tstyle.msTransform = 'translateY(' + ((-1 * index) * this.getHeight()) + 'px)';\n\t\t}\n\n\t\tthis.config.activeIndex = index;\n\t\tthis.fireEvent(this, 'change', [this, this.config.activeIndex, this.getActiveView()]);\n\t}\n});\n\nX.util.cm.addCString('carousel', X.ui.Carousel);\n\n\nX.ui.FormView = X.extend(X.View, {\n\tinitialize: function(config){\n\t\tthis.config = {\t};\n\t\tX.apply(this.config, config);\n\t\tX.ui.FormView.base.initialize.call(this, this.config);\n\t},\n\trender: function(){\n\t\tX.ui.FormView.base.render.call(this);\n\t},\n\tserialize: function(){\n\t\treturn $.param(this.getJSON());\n\t},\n\tgetJSON: function(){\n\t\tvar params = { },\n\t\t\titems = this.config.items,\n\t\t\tlen = items.length;\n\t\t\n\t\tfor(var i=0; i<len; i++){\n\t\t\tparams[items[i].getName()] = items[i].getValue();\n\t\t}\n\n\t\treturn params;\n\t}\n});\n\n\nX.ui.Form = X.extend(X.util.Observer, {\n\tinitialize: function(config){\n\t\tthis.config = {\n\t\t\tplaceholder: 'please..',\n\t\t\trequired: false,\n\t\t\tdisabled: false,\n\t\t\tdefaultValue: null,\n\t\t\tlabel: null\n\t\t};\n\t\tX.apply(this.config, config);\n\t\t\t\n\t\tvar listener = {};\n\t\tif(this.config.listener){\n\t\t\tlistener = this.config.listener;\n\t\t}\n\t\tX.ui.Form.base.initialize.call(this, listener);\n\n\t\tif(!this.config.el){\n\t\t\tthis.config.el = {\n\t\t\t\ttag: 'div',\n\t\t\t\tid: this.config.id\n\t\t\t};\n\t\t}\n\t\t\n\t\tthis.el = X.util.em.get(this.config.el);\n\t\t\n\t\tif(!X.util.cm.get(this.el.get(0).id)){\n\t\t\tX.util.cm.set(this.el.get(0).id, this);\n\t\t}\n\t\t\n\t\tif(this.config.autoRender){\n\t\t\tthis.render();\n\t\t}\n\t},\n\trender: function(){\n\t\tthis.fireEvent(this, 'beforerender', [this]);\n\t\tthis.el.addClass('ui-form-box');\n\t\t\n\t\tif(this.config.label){\n\t\t\tthis.labelCreate();\n\t\t}\n\t\t\n\t\tif(this.config.style){\n\t\t\tthis.el.css(this.config.style);\n\t\t}\n\t\t\n\t\tthis.formcontin = X.util.em.get()\n\t\t\t.addClass('ui-form-container');\n\t\t\n\t\tthis.el.append(this.formcontin);\n\n\t\tif(this.config.disabled){\n\t\t\tthis.disabled();\n\t\t}\n\t},\n\tgetName: function(){\n\t\treturn this.config.name || this.el.get(0).id;\n\t},\n\tsetValue: function(val){\n\t\tif (this.form.attr('disabled')) {\n\t\t\treturn;\n\t\t}\n\t\tthis.form.val(val);\n\t\tthis.fireEvent(this, 'setvalue', [this, val]);\n\t},\n\tgetValue: function(){\n\t\treturn this.form.val();\n\t},\n\tlabelCreate: function(){\n\t\tthis.formlabel = X.util.em.get()\n\t\t\t.addClass('ui-form-label').html(this.config.label);\n\t\t\n\t\tthis.el.append(this.formlabel);\n\t},\n\tshow: function(){\n\t\tthis.el.show();\n\t\tthis.fireEvent(this, 'show', [this]);\n\t},\n\thide: function(){\n\t\tthis.el.hide();\n\t\tthis.fireEvent(this, 'hide', [this]);\n\t},\n\ttoggle: function(){\n\t\tif(this.el.css('display') !== 'none'){\n\t\t\tthis.hide();\n\t\t}\n\t\telse{\n\t\t\tthis.show();\n\t\t}\n\t},\n\tgetEl: function(){\n\t\treturn this.el;\n\t},\n\tgetId: function(){\n\t\treturn this.el.attr('id');\n\t},\n\tdisabled: function(){\n\t\tthis.el.addClass('ui-disabled');\n\t\tthis.form.attr('disabled', true);\n\t\tthis.fireEvent(this, 'disabled', [this]);\n\t},\n\tenabled: function(){\n\t\tthis.el.removeClass('ui-disabled');\n\t\tthis.form.attr('disabled', false);\n\t\tthis.fireEvent(this, 'enabled', [this]);\n\t},\n\tdestroy: function(){\n\t\tthis.el.remove();\n\t}\n});\n\nX.ui.TextBox = X.extend(X.ui.Form, {\n\tinitialize: function(config){\n\t\tthis.config = {\n\t\t\ttype: 'text'\n\t\t};\n\t\tX.apply(this.config, config);\n\t\tX.ui.TextBox.base.initialize.call(this, this.config);\n\t},\n\trender: function(){\n\t\tX.ui.TextBox.base.render.call(this);\n\n\t\tthis.el.addClass('ui-textbox');\n\t\tthis.formCreate();\n\t\t\n\t\tthis.form.bind('focus keypress blur keydown keyup', {me: this}, this.elementEvent);\n\t\t\n\t\tthis.fireEvent(this, 'afterrender', [this]);\n\t},\n\tformCreate: function(){\n\t\tthis.form = X.util.em.get({\n\t\t\ttag: 'input',\n\t\t\ttype: this.config.type,\n\t\t\t'class': 'ui-text-input',\n\t\t\tplaceholder: this.config.placeholder,\n\t\t\tdisabled: this.config.disabled,\n\t\t\tvalue: this.config.defaultValue\n\t\t});\n\t\tthis.formcontin.append(this.form);\n\t},\n\tsetType: function(type){\n\t\tthis.form.prop('type', type);\n\t},\n\tsetPlaceholder: function(placeholder){\n\t\tthis.config.placeholder = placeholder;\n\t\tthis.form.attr('placeholder', placeholder);\n\t},\n\telementEvent: function(e){\n\t\tvar me = e.data.me,\n\t\t\tval = me.getValue(),\n\t\t\ttype =  e.type;\n\n\t\tme.fireEvent(me, type, [me, val, e]);\n\t}\n});\n\nX.util.cm.addCString('textbox', X.ui.TextBox);\n\nX.ui.Slider = X.extend(X.ui.Form, {\n\tinitialize: function(config){\n\t\tthis.config = {\n\t\t\tmin: 0,\n\t\t\tmax: 100,\n\t\t\tstep: 1,\n\t\t\tdefaultValue: 50,\n\t\t\tdirection: 'x',\n\t\t\tstyle: { },\n\t\t\tsubhandle: false\n\t\t};\n\t\tX.apply(this.config, config);\n\t\tX.ui.Slider.base.initialize.call(this, this.config);\n\t},\n\trender: function(){\n\t\tX.ui.Slider.base.render.call(this);\n\t\t\n\t\tthis.el.addClass('ui-slider ui-slider-' + this.config.direction);\n\t\tthis.formCreate();\n\t\tthis.handleCreate();\n\t\tthis.subHandleCreate();\n\n\t\tif(this.config.disabled){\n\t\t\tthis.disabled();\n\t\t}\n\t\t\n\t\tthis.dragging = false;\n\t\tthis.handle.bind( X.events.start, {me: this}, function(e){\n\t\t\tvar me = e.data.me,\n\t\t\t\tel = me.el;\n\t\t\t\n\t\t\tif(el.hasClass('ui-disabled')){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tme.dragging = true;\n\t\t\tme.subdragging = false;\n\n\t\t\tX.getDoc().on(X.events.move, {me: me}, me.move);\n\t\t\tX.getDoc().on(X.events.end, {me: me}, me.end);\n\t\t\treturn false;\n\t\t});\n\n\t\t\n\t\tif(this.subhandle){\n\t\t\tthis.subhandle.bind( X.events.start, {me: this}, function(e){\n\t\t\t\tvar me = e.data.me,\n\t\t\t\t\tel = me.el;\n\t\t\t\t\n\t\t\t\tif(el.hasClass('ui-disabled')){\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tme.dragging = true;\n\t\t\t\tme.subdragging = true;\n\n\t\t\t\tX.getDoc().on(X.events.move, {me: me}, me.move);\n\t\t\t\tX.getDoc().on(X.events.end, {me: me}, me.end);\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\n\t\tthis.setValue(this.config.defaultValue);\n\t\tthis.fireEvent(this, 'afterrender', [this]);\n\t},\n\tmove: function(e){\n\t\tvar me = e.data.me;\n\t\tif ( me.dragging ) {\n\t\t\tme.setValue( e );\n\t\t\treturn false;\n\t\t}\n\t},\n\tend: function(e){\n\t\tvar me = e.data.me;\n\t\tif ( me.dragging ) {\n\t\t\tme.dragging = false;\n\t\t\tvar val = me.getValue();\n\t\t\tme.fireEvent(me, 'change', [val]);\n\t\t\treturn false;\n\t\t}\n\n\t\tX.getDoc().off(X.events.move, {me: me}, me.move);\n\t\tX.getDoc().off(X.events.end, {me: me}, me.end);\n\t},\n\tformCreate: function(){\n\t\tthis.form = X.util.em.get({\n\t\t\ttag: 'input',\n\t\t\ttype: 'range',\n\t\t\t'class': 'ui-slider-input',\n\t\t\trequired: this.config.required,\n\t\t\tplaceholder: this.config.placeholder,\n\t\t\tmin: this.config.min,\n\t\t\tmax: this.config.max,\n\t\t\tstep: this.config.step,\n\t\t\tvalue: this.config.defaultValue\n\t\t});\n\t\tthis.formcontin.append(this.form);\n\t},\n\tsubHandleCreate: function(){\n\t\tif(this.config.subhandle){\n\t\t\tthis.subhandle = X.util.em.get().addClass('ui-slider-subhandle');\n\t\t\tthis.formcontin.append(this.subhandle);\n\t\t\t\n\t\t\tif(X.type(this.config.range) === 'object'){\n\t\t\t\t\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.subhandle.addClass('ui-slider-subhandle');\n\t\t\t}\n\t\t}\n\t},\n\thandleCreate: function(val){\n\t\tthis.handle = X.util.em.get(false, false, 'a').addClass('ui-slider-handle');\n\t\tthis.formcontin.append(this.handle);\n\n\t\tif(X.type(this.config.range) === 'object'){\n\t\t\tthis.subhandle = X.util.em.get(false, false, 'a').addClass('ui-slider-handle ui-slider-subhandle');\n\t\t\tthis.formcontin.append(this.subhandle);\n\t\t}\n\t},\n\tsetValue: function(val){\n\t\tvar percent,\n\t\t\tmin = this.getMin(),\n\t\t\tmax = this.getMax();\t\n\t\t\t\n\t\tif (X.type(val) === 'object') {\n\t\t\tvar e = val,\n\t\t\t\ttol = 8;\n\n\t\t\tif(this.config.direction === 'x'){\n\t\t\t\tvar w = this.formcontin.width(),\n\t\t\t\t\tl = this.formcontin.offset().left,\n\t\t\t\t\tx = e.originalEvent.pageX;\n\t\t\t\t\n\t\t\t\tif ( !this.dragging || x < l - tol || x > l + w + tol ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tpercent = Math.round(((x - l) / w ) * 100 );\n\t\t\t}\n\t\t\tif(this.config.direction === 'y'){\n\t\t\t\tvar h = this.formcontin.height(),\n\t\t\t\t\tt = this.formcontin.offset().top,\n\t\t\t\t\ty = e.originalEvent.pageY;\n\t\t\t\t\t\n\t\t\t\tif ( !this.dragging || y < t - tol || y > t + h + tol ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tpercent = Math.round(((y - t) / h ) * 100);\n\t\t\t}\n\t\t}\n\n\t\tif(X.type(val) === 'number'){\n\t\t\tpercent = this.percentValue(val);\n\t\t}\n\t\t\n\t\tvar newval = Math.round( (percent / 100) * (max - min) ) + min;\n\t\tnewval = this.trimValue(newval);\n\n\t\tpercent = this.percentValue(newval);\n\n\t\tif(this.subdragging){\n\t\t\tvar data = this.handle.data('data');\n\n\t\t\tif(data){\n\t\t\t\tdata = parseInt(data);\n\t\t\t\tif(newval < data){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(!this.subdragging && this.subhandle){\n\t\t\tvar data = this.subhandle.data('data');\n\t\t\tif(data){\n\t\t\t\tdata = parseInt(data);\n\t\t\t\tif(newval > data)\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tvar subPercent = (this.config.subhandle - min) / (max - min) * 100;\n\t\t\t\tvar subNewVal = Math.round( (subPercent / 100) * (max - min) ) + min;\n\t\t\t\t\n\n\t\t\t\tif(this.config.direction === 'x'){\n\t\t\t\t\tthis.subhandle.css(\"left\", subPercent + \"%\").data('data', subNewVal);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tthis.subhandle.css(\"top\", subPercent + \"%\").data('data', subNewVal);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(this.config.direction === 'x'){\n\t\t\tif(this.subdragging){\n\t\t\t\tthis.subhandle.css(\"left\", percent + \"%\").data('data', newval);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.handle.css(\"left\", percent + \"%\").data('data', newval);\n\t\t\t}\n\t\t}\n\n\t\tif(this.config.direction === 'y'){\n\t\t\tif(this.subdragging){\n\t\t\t\tthis.subhandle.css(\"top\", (percent) + \"%\").data('data', newval);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.handle.css(\"top\", (percent) + \"%\").data('data', newval);\n\t\t\t}\n\t\t}\n\n\t\tthis.fireEvent(this, 'change', [this, percent, newval]);\n\t},\n\ttrimValue: function(val){\n\t\tvar min = this.getMin(),\n\t\t\tmax = this.getMax();\n\n\t\tif ( val <= min ) {\n\t\t\treturn min;\n\t\t}\n\t\tif ( val >= max ) {\n\t\t\treturn max;\n\t\t}\n\t\tvar step = ( this.config.step > 0 ) ? this.config.step : 1,\n\t\t\tstepVal = (val - min) % step,\n\t\t\talignValue = val - stepVal;\n\n\t\tif ( Math.abs(stepVal) * 2 >= step ) {\n\t\t\talignValue += ( stepVal > 0 ) ? step : ( -step );\n\t\t}\n\n\t\treturn parseFloat(alignValue.toFixed(5));\n\t},\n\tpercentValue: function(val){\n\t\tvar min = this.getMin(),\n\t\t\tmax = this.getMax();\n\n\t\tpercent = (parseFloat(val) - min) / (max - min) * 100;\n\t\t\n\t\tif(isNaN(percent)){\n\t\t\treturn 0;\n\t\t}\n\t\tif (percent < 0) { \n\t\t\tpercent = 0; \n\t\t}\n\t\tif (percent > 100) { \n\t\t\tpercent = 100; \n\t\t}\n\n\t\treturn percent;\n\t},\n\t//override\n\tgetValue: function(){\n\t\tif(this.subhandle){\n\t\t\treturn [this.handle.data('data'), this.subhandle.data('data')];\n\t\t}\n\t\telse{\n\t\t\treturn this.handle.data('data');\n\t\t}\n\t},\n\tdisabled: function(){\n\t\tthis.el.addClass('ui-disabled');\n\t\tthis.handle.addClass('ui-disabled');\n\t\tif(this.subhandle){\n\t\t\tthis.subhandle.addClass('ui-disabled');\n\t\t}\n\t\tthis.form.attr('disabled', true);\n\t\tthis.fireEvent(this, 'disabled', [this]);\n\t},\n\tenabled: function(){\n\t\tthis.el.removeClass('ui-disabled');\n\t\tthis.handle.removeClass('ui-disabled');\n\t\tif(this.subhandle){\n\t\t\tthis.subhandle.removeClass('ui-disabled');\n\t\t}\n\t\tthis.form.attr('disabled', false);\n\t\tthis.fireEvent(this, 'enabled', [this]);\n\t},\n\tsetMin: function(min){\n\t\tthis.config.min = min;\n\t},\n\tsetMax: function(max){\n\t\tthis.config.max = max;\n\t},\n\tgetMin: function(){\n\t\treturn this.config.min;\n\t},\n\tgetMax: function(){\n\t\treturn this.config.max;\n\t}\n});\n\nX.util.cm.addCString('slider', X.ui.Slider);\n\nX.ui.Progressbar = X.extend(X.ui.Form, {\n\tinitialize: function(config){\n\t\tthis.config = {\n\t\t\tmax: 100,\n\t\t\tdefaultValue: 0\n\t\t};\n\t\tX.apply(this.config, config);\n\t\tX.ui.Progressbar.base.initialize.call(this, this.config);\n\t},\n\trender: function(){\n\t\tX.ui.Progressbar.base.render.call(this);\n\t\t\n\t\tthis.el.addClass('ui-progressbar');\n\t\n\t\tthis.formCreate();\n\t\t\n\t\tthis.setValue(this.config.defaultValue);\n\t\t\n\t\tthis.fireEvent(this, 'afterrender', [this]);\n\t},\n\tformCreate: function(){\n\t\tthis.form = X.util.em.get({\n\t\t\ttag: 'progress',\n\t\t\t'class': 'ui-progress',\n\t\t\tmax: this.config.max,\n\t\t\tvalue: this.config.defaultValue\n\t\t});\n\t\t\n\t\tthis.gauge = X.util.em.get().addClass('ui-progress-gauge');\n\t\tthis.bar = X.util.em.get().addClass('ui-progress-bar');\n\t\tthis.formcontin.append(this.gauge, this.bar);\n\t\tthis.formcontin.append(this.form);\n\t},\n\tsetValue: function(val){\n\t\tif (this.el.hasClass('ui-disabled')) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tvar w = this.el.width(),\n\t\t\tpercent = (w / this.config.max) * val;\n\n\t\tif(isNaN(percent)){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif(percent > w){\n\t\t\tpercent = w;\n\t\t}\t\t\n\t\t\n\t\tif(val < 0){\n\t\t\tval = 0;\n\t\t}\n\t\t\n\t\tif(val > this.config.max){\n\t\t\tval = this.config.max;\n\t\t}\n\t\tthis.form.val(val);\n\t\t\n\t\tthis.gauge.width(percent);\n\t\tthis.fireEvent(this, 'update', [this, val]);\n\t},\n\tsetMax: function(max){\n\t\tthis.config.max = max;\n\t},\n\tgetMax: function(max){\n\t\treturn this.config.max;\n\t},\n\tdisabled: function(){\n\t\tthis.el.addClass('ui-disabled');\n\t\tthis.fireEvent(this, 'disabled', [this]);\n\t},\n\tenabled: function(){\n\t\tthis.el.removeClass('ui-disabled');\n\t\tthis.fireEvent(this, 'enabled', [this]);\n\t}\n});\n\nX.util.cm.addCString('progressbar', X.ui.Progressbar);\n\n\nX.ui.Spinner = X.extend(X.ui.Form, {\n\tinitialize: function(config){\n\t\tthis.config = {\n\t\t\tmin: 0,\n\t\t\tmax: 100,\n\t\t\tstep: 1,\n\t\t\tdefaultValue: 0\n\t\t};\n\t\tX.apply(this.config, config);\n\t\tX.ui.Spinner.base.initialize.call(this, this.config);\n\t},\n\trender: function(){\n\t\tX.ui.Spinner.base.render.call(this);\n\t\tthis.el.addClass('ui-spinner').width(this.config.width);\n\t\t\n\t\tthis.formCreate();\n\t\tthis.handleCreate();\n\t\t\n\t\tthis.fireEvent(this, 'afterrender', []);\n\t},\n\tformCreate: function(){\n\t\tthis.form = X.util.em.get({\n\t\t\ttag: 'input',\n\t\t\ttype: 'number',\n\t\t\tmin: this.config.min,\n\t\t\tmax: this.config.max,\n\t\t\tvalue: this.config.defaultValue,\n\t\t\tstep: this.config.step\n\t\t});\n\t\tthis.formcontin.append(this.form);\n\t\t\n\t\tthis.form.bind('change', { me: this }, this._change);\n\t},\n\t_change: function(e){\n\t\tvar me = e.data.me,\n\t\t\tval = parseFloat(me.form.val(), 10) || 0;\n\t\t\n\t\tif(val < me.config.min){\n\t\t\tval = me.config.min\n\t\t\tme.form.val(val);\n\t\t}\n\t\telse if(val > me.config.max){\n\t\t\tval = me.config.max;\n\t\t\tme.form.val(val);\n\t\t}\n\t\t\n\t\tme.fireEvent(me, 'change', [me,  val]);\n\t},\n\thandleCreate: function(){\n\t\tvar plus = X.util.em.get()\n\t\t\t.html('+').addClass('ui-spinner-btn ui-spinner-plus');\n\n\t\tthis.formcontin.append(plus);\n\t\t\n\t\t\n\t\tvar minus = X.util.em.get()\n\t\t\t.html('-').addClass('ui-spinner-btn ui-spinner-minus');\n\n\t\tthis.formcontin.append(minus);\n\t\t\n\t\tplus.bind(X.events.start, { me: this }, this.plus);\n\t\tminus.bind(X.events.start, { me: this }, this.minus);\n\t},\n\tend: function(e){\n\t\tvar me = e.data.me;\n\t\tme.clearTimer();\n\t\t\n\t\treturn false;\n\t},\n\tclearTimer: function(){\n\t\tif(this.interval){\n\t\t\twindow.clearInterval(this.interval);\n\t\t\tthis.interval = null;\n\t\t}\n\n\t\tX.getDoc().off(X.events.end, {me: this}, this.end);\n\t},\n\ttimer: function(e, flag){\n\t\tif(!this.interval){\n\t\t\tvar me = this;\n\t\t\tthis.interval = window.setInterval(function(){\n\t\t\t\tme[flag](e);\n\t\t\t}, 100);\n\t\t}\n\t},\n\tplus: function(e){\n\t\tvar me = e.data.me,\n\t\t\tval = parseFloat(me.form.val(), 10) || 0;\n\t\t\n\t\tvar result = val + me.config.step;\n\t\t\n\t\tif(result > me.config.max){\n\t\t\tresult = me.config.max;\n\t\t}\n\t\t\n\t\tresult = parseFloat(result.toFixed(1), 10);\n\t\tme.form.val(result);\n\n\t\tme.timer(e, 'plus');\n\t\t\n\t\tX.getDoc().on(X.events.end, {me: me}, me.end);\n\t\treturn false;\n\t},\n\tminus: function(e){\n\t\tvar me = e.data.me,\n\t\t\tval = parseFloat(me.form.val(), 10) || 0;\n\t\t\n\t\tvar result = val - me.config.step;\n\t\t\n\t\tif(result < me.config.min){\n\t\t\tresult = me.config.min;\n\t\t}\n\t\t\n\t\tresult = parseFloat(result.toFixed(1), 10);\n\t\tme.form.val(result);\n\t\t\n\t\tme.timer(e, 'minus');\n\n\t\tX.getDoc().on(X.events.end, {me: me}, me.end);\n\t\treturn false;\n\t},\n\tsetValue: function(val){\n\t\tif (this.el.hasClass('ui-disabled')) {\n\t\t\treturn;\n\t\t}\n\t\tif(!val){\n\t\t\tval = 0;\n\t\t}\n\n\t\tif(val < this.config.min){\n\t\t\tval = this.config.min;\n\t\t}\n\t\tif(val > this.config.max){\n\t\t\tval = this.config.max;\n\t\t}\n\t\t\n\t\tthis.form.val(val);\n\t\t\n\t\tthis.fireEvent(this, 'change', [this,  val]);\n\t},\n\tsetMax: function(max){\n\t\tif(X.type(max) !== 'number'){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.config.max = max;\n\t\tthis.form.attr('max', max);\n\t},\n\tsetMin: function(min){\n\t\tif(X.type(min) !== 'number'){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.config.min = min;\n\t\tthis.form.attr('min', min);\n\t},\n\tgetMax: function(){\n\t\treturn this.config.max;\n\t},\n\tgetMin: function(){\n\t\treturn this.config.min;\n\t},\n\tsetStep: function(step){\n\t\tif(X.type(step) !== 'number'){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.config.step = step;\n\t\tthis.form.attr('step', step);\n\t}\n});\n\nX.util.cm.addCString('spinner', X.ui.Spinner);\n\n\nX.ui.SwitchBox = X.extend(X.ui.Form, {\n\tinitialize: function(config){\n\t\tthis.config = {\n\t\t\tchecked: false,\n\t\t\ton: 'ON',\n\t\t\toff: 'OFF'\n\t\t};\n\t\tX.apply(this.config, config);\n\t\tX.ui.SwitchBox.base.initialize.call(this, this.config);\n\t},\n\trender: function(){\n\t\tX.ui.SwitchBox.base.render.call(this);\n\t\tthis.el.addClass('ui-switchbox').width(this.config.width);\n\t\tthis.formCreate();\n\n\t\tthis.handle = X.util.em.get().addClass('ui-switchbox-handle');\n\t\tthis.text = X.util.em.get({tag: 'span'}).addClass('ui-switchbox-text');\n\t\t\n\n\t\tthis.formcontin.append(this.text)\n\t\t\t.append(this.handle);\n\t\t\n\t\tthis.el.bind('vclick', { me: this }, this._change);\n\n\t\tif(this.config.checked){\n\t\t\tthis.el.addClass('on');\n\t\t}\n\t\telse{\n\t\t\tthis.el.addClass('off');\n\t\t}\n\n\t\tthis.setText();\n\n\t\tif(this.config.disabled){\n\t\t\tthis.disabled();\n\t\t}\n\t\t\n\t\tthis.fireEvent(this, 'afterrender', [this]);\n\t},\n\tformCreate: function(){\n\t\tthis.form = X.util.em.get({\n\t\t\ttag: 'input',\n\t\t\ttype: 'checkbox',\n\t\t\tchecked: this.config.checked\n\t\t}).hide();\n\t\tthis.formcontin.append(this.form);\n\t},\n\t_change: function(e){\n\t\tvar me = e.data.me,\n\t\t\tel = me.el;\n\n\t\tif(me.el.hasClass('on')){\n\t\t\tme.unchecked();\n\t\t}\n\t\telse{\n\t\t\tme.checked();\n\t\t}\n\t},\n\tsetOn: function(on){\n\t\tthis.config.on = on;\n\n\t\tthis.setText();\n\t},\n\tsetOff: function(off){\n\t\tthis.config.off = off;\n\n\t\tthis.setText();\n\t},\n\tsetText: function(){\n\t\tvar text;\n\t\tif(this.el.hasClass('on')){\n\t\t\ttext = this.config.on;\n\t\t}\n\t\telse{\n\t\t\ttext = this.config.off;\n\t\t}\n\n\t\tthis.text.html(text);\n\t},\n\ttoggleChecked: function(){\n\t\tif(this.el.hasClass('on')){\n\t\t\tthis.unchecked();\n\t\t}\n\t\telse{\n\t\t\tthis.checked();\n\t\t}\n\t},\n\tchecked: function(){\n\t\tif(this.el.hasClass('ui-disabled')){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.el.removeClass('off').addClass('on');\n\t\t\n\t\tthis.setText();\n\t\tthis.form.attr('checked', true);\n\n\t\tthis.fireEvent(this, 'change', [this, true]);\n\t},\n\tunchecked: function(){\n\t\tif(this.el.hasClass('ui-disabled')){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.el.removeClass('on').addClass('off');\n\t\t\n\t\tthis.setText();\n\t\tthis.form.attr('checked', false);\n\t\tthis.fireEvent(this, 'change', [this, false]);\n\t},\n\tgetValue: function(){\n\t\treturn this.form.is(':checked');\n\t}\n});\n\nX.util.cm.addCString('switchbox', X.ui.SwitchBox);\n\n\nX.ui.LayoutView = X.extend(X.View, {\n\tinitialize: function(config){\n\t\tthis.config = {\n\t\t\tresize: true,\n\t\t\tminSize: {\n\t\t\t\twest: 100,\n\t\t\t\teast: 100,\n\t\t\t\tsouth: 100,\n\t\t\t\tnouth: 100\n\t\t\t},\n\t\t\tmaxSize: {\n\t\t\t\twest: 400,\n\t\t\t\teast: 400,\n\t\t\t\tsouth: 200,\n\t\t\t\tnouth: 200\n\t\t\t},\n\t\t\tsize: {\n\t\t\t\twest: 200,\n\t\t\t\teast: 200,\n\t\t\t\tsouth: 100,\n\t\t\t\tnouth: 100\n\t\t\t},\n\t\t\tregions: null,\n\t\t\tscroll: false\n\t\t};\n\t\tX.apply(true, this.config, config);\n\t\tX.ui.LayoutView.base.initialize.call(this, this.config);\n\t},\n\trender: function(){\n\t\tX.ui.LayoutView.base.render.call(this);\n\t\tthis.el.addClass('ui-layout');\n\t\t\n\t\tthis.contain = X.util.em.get().addClass('ui-layout-contain');\n\t\tthis.body.append(this.contain);\n\n\t\tthis.createView();\n\t\t\n\t\tthis.maxWidth = this.el.width();\n\t\tthis.maxHeight = this.el.height();\n\t\t\n\t\tthis.resizeing = false;\n\t\tthis.region = null;\n\t\t\n\t\tthis.spliters = { };\t\t\n\t\tfor(var attr in this.config.regions){\n\t\t\tif(attr === 'center'){\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthis.createSpliter(attr);\n\t\t}\n\t\t\n\t\t\n\t\tif(X.platform.hasTouch){\n\t\t\tX.getWindow().bind('orientationchange', { me: this }, function(){\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\t\telse{\n\t\t\tX.getWindow().bind('resize', { me: this }, function(e){\n\t\t\t\tvar me = e.data.me;\n\t\t\t\tme.fire(me, 'resize', []);\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\t},\n\tcreateView: function(){\n\t\tvar hViews = [], vViews = [], \n\t\t\tregions = this.config.regions;\n\t\n\t\tfor(var attr in regions){\n\t\t\tif(attr === 'west' || attr === 'east'){\n\t\t\t\tregions[attr].config.width = this.config.size[attr];\n\t\t\t\tregions[attr].config.height = false;\n\t\t\t\tregions[attr].config.flexible = false;\n\n\t\t\t\thViews.push(regions[attr]);\n\t\t\t}\n\n\t\t\tthis[attr] = regions[attr];\n\t\t\t\n\t\t\tif(attr === 'south' || attr === 'nouth'){\n\t\t\t\tregions[attr].config.width = false;\n\t\t\t\tregions[attr].config.height = this.config.size[attr];\n\t\t\t\tregions[attr].config.flexible = false;\n\t\t\t\t\n\t\t\t\tvViews.push(regions[attr]);\n\t\t\t}\n\t\t}\n\t\t\n\n\t\tif(regions.center){\n\t\t\thViews.push(regions.center);\n\t\t}\n\n\t\tX.util.cm.create(this.body, vViews);\n\t\tif(regions.nouth){\n\t\t\tregions.nouth.el.insertBefore(this.contain);\n\t\t}\n\t\t\n\t\tX.util.cm.create(this.contain, hViews);\n\t\tif(regions.east){\n\t\t\tregions.east.el.insertAfter(regions.center.el);\n\t\t}\n\t\t\n\t\tfor(var attr in regions){\n\t\t\tregions[attr].el.addClass('ui-layout-items ' + attr);\n\t\t}\n\t\t\n\t\tthis.el.bind('mousemove', { me: this }, this.mousemove);\n\t\tthis.el.bind('mouseup', { me: this }, this.mouseup);\n\t},\n\tcreateSpliter: function(region){\n\t\tvar div = X.util.em.get()\n\t\t\t.addClass('ui-layout-spliter ' + region);\n\n\t\tthis.spliters[region] = div;\n\t\tthis.config.regions[region].el.prepend(div);\n\n\t\tthis.spliters[region].bind('mousedown', {me: this, region: region}, this.mousedown);\n\t},\n\tmousedown: function(e){\n\t\tvar me = e.data.me,\n\t\t\tregion = e.data.region;\n\n\t\tme.resizeing = true;\t\t\n\t\tme.region = region;\n\t},\n\tmousemove: function(e){\n\t\tvar me = e.data.me;\n\t\tif(!me.resizeing || !me.region){\n\t\t\treturn;\n\t\t}\n\n\t\tvar pageX = e.originalEvent.touches ? \n\t\t\t\te.originalEvent.touches[0].pageX : e.originalEvent.pageX,\n\t\t\tpageY = e.originalEvent.touches ? \n\t\t\t\te.originalEvent.touches[0].pageY : e.originalEvent.pageY;\n\n\t\tvar region = me.region,\n\t\t\tview = me[region];\n\n\t\tif(region === 'west'){\n\t\t\tvar originW = view.getWidth() + view.getEl().offset().left,\n\t\t\t\tww = 0;\n\t\t\t\n\t\t\t\n\t\t\t//left\n\t\t\tif(originW > pageX){\n\t\t\t\tww = originW - pageX;\n\t\t\t\tww = originW - ww + 5;\n\t\t\t}\n\n\t\t\t//right\n\t\t\tif(originW < pageX){\n\t\t\t\tww = Math.abs(originW - pageX);\n\t\t\t\tww = originW + ww + 5;\n\t\t\t}\n\n\t\t\tif(ww < me.config.maxSize.west && ww > me.config.minSize.west){\n\t\t\t\tview.setWidth(ww);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(region === 'east'){\n\t\t\tvar left = view.getEl().offset().left,\n\t\t\t\toriginW = view.getWidth(),\n\t\t\t\tww = 0;\n\t\t\t\n\t\t\t//left\n\t\t\tif(left > pageX){\n\t\t\t\tww = originW + Math.abs(left - pageX);\n\t\t\t}\n\t\t\t\n\t\t\t//right\n\t\t\tif(left < pageX){\n\t\t\t\tww = originW - Math.abs(left - pageX);\n\t\t\t\tconsole.log(ww);\n\t\t\t}\n\t\t\t\n\t\t\tif(ww < me.config.maxSize.east && ww > me.config.minSize.east){\n\t\t\t\tview.setWidth(ww);\n\t\t\t}\n\t\t}\n\n\t\tme.fireEvent(me, 'resize', []);\n\t},\n\tmouseup: function(e){\n\t\tvar me = e.data.me;\n\t\tme.resizeing = false;\n\t\tme.region = null;\n\t}\n});\n\n\nX.util.cm.addCString('layoutview', X.ui.LayoutView);\n\n\n(function(){\n\t\n\tvar head = $('head');\n\tfunction SetMeta(name, content){\n\t\tvar meta = $('<meta />');\n\t\tmeta.attr('name', name);\n\t\tmeta.attr('content', content);\n\t\thead.eq(0).append(meta);\n\t}\n\t\n\t\n\t// Non-Retina iPhone, iPod touch, and Android devices\n\t//57\n\t// Non-Retina iPad\n\t//72\n\t// Retina iPhone and iPod touch\n\t//114\n\t// Retina iPad\n\t//144\n\t\n\tfunction SetLink(rel, icon, size){\n\t\tvar link = $('<link />');\n\t\tlink.attr('rel', rel);\n\t\tlink.attr('href', icon);\n\t\t\n\t\tif (size) {\n\t\t\tlink.setAttribute('sizes', size + 'x' + size);\n\t\t}\n\t\thead.eq(0).append(link);\n\t}\t\n\t\n\tX.App = function(config){\n\t\tvar default_config = {\n\t\t\tname: 'Application',\n\t\t\ticon: null,\n\t\t\ticonsize: null,\n\t\t\tsplash: null,\n\t\t\tviewport: true,\n\t\t\tfullscreen: true,\n\t\t\tstatusbar: null,\n\t\t\tready: null,\n\t\t\tinitialScale: 1,\n\t\t\tmaximumScale: 1,\n\t\t\tminimumScale: 1,\n\t\t\tuserScalable: 'no'\n\t\t};\n\t\tconfig = X.apply(default_config, config);\n\n\t\tif(config.viewport){\n\t\t\tSetMeta('viewport', 'initial-scale=' + default_config.initialScale + \n\t\t\t\t\t', maximum-scale=' + default_config.maximumScale + \n\t\t\t\t\t', minimum-scale=' + default_config.minimumScale + \n\t\t\t\t\t', user-scalable=' + default_config.userScalable);\n\t\t}\n\t\tif(config.fullscreen){\n\t\t\tSetMeta('apple-mobile-web-app-capable', 'yes');\n\t\t\tSetMeta('apple-touch-fullscreen', 'yes');\n\t\t}\n\t\t\n\t\tif(config.statusbar){\n\t\t\tSetMeta('apple-mobile-web-app-status-bar-style', config.statusbar);\n\t\t}\n\t\t\n\t\tif(config.splash){\n\t\t\tSetLink('apple-touch-startup-image', config.splash);\n\t\t}\n\t\t\n\t\tif(config.icon){\n\t\t\tSetLink('apple-touch-icon', config.icon, config.iconsize);\n\t\t}\n\t\t\n\t\t\n\t\tif(config.id){\n\t\t\tconfig.id = config.id + config.name;\n\t\t}\n\n\t\tX.getDoc().ready(function(){\n\t\t\tvar default_config = {\n\t\t\t\tid: config.id,\n\t\t\t\tel: 'body',\n\t\t\t\tautoSize: true,\n\t\t\t\tautoRender: true,\n\t\t\t\tscroll: false\n\t\t\t};\n\t\t\t\n\t\t\tdefault_config = X.apply(default_config, config.viewConfig);\n\t\n\t\t\t\n\t\t\tX.App.View = new X.View(default_config);\n\n\t\t\tX.getDoc().on('vclick', 'a', { view: X.App.View }, function(e){\n\t\t\t\tvar el = $(this),\n\t\t\t\t\thref = el.attr('href'),\n\t\t\t\t\ttransition = el.data('transition') || 'slide',\n\t\t\t\t\thistory = el.data('history') === false ? false : true,\n\t\t\t\t\tback = el.data('back'),\n\t\t\t\t\trel = el.attr('rel'),\n\t\t\t\t\tparents, vc;\n\t\t\t\t\n\t\t\t\tif(!href){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(rel === \"external\"){\n\t\t\t\t\tif(!X.platform.isDesktop){\n\t\t\t\t\t\tvar href = el.attr(\"href\");\n\t\t\t\t\t\thref = href.replace(\"emulIndex\", \"mssIndex\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tel.attr(\"href\", href);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(href.match(/^tel\\:/)){\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tparents = el.parents('.ui-view');\n\t\t\t\tparents.each(function(){\n\t\t\t\t\tvar id = this.id;\n\t\t\t\t\tvar view = X.util.cm.get(id);\n\t\t\t\t\tvc = view.getViewController();\n\t\t\t\t\tif(vc){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif(!vc){\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif(back && href === '#'){\n\t\t\t\t\tvc.backPage();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(href !== '#' && back){\n\t\t\t\t\tvc.prevPage({ url: href });\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\n\t\n\t\t\t\tif(href === '#' || !href){\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvc.nextPage({\n\t\t\t\t\turl: href,\n\t\t\t\t\ttransition: transition,\n\t\t\t\t\thistory: history\n\t\t\t\t});\n\t\n\t\t\t\treturn false;\n\t\t\t});\n\n\n\t\t\tif(config.ready){\n\t\t\t\tconfig.ready(X.App.View);\n\t\t\t}\n\n\t\t\tconfig = null;\n\n\t\t\tX.getDoc().bind('orientationchange', function(e){\n\t\t\t\treturn false;\n\t\t\t});\n\t\t});\n\t};\n\t\n\tX.getApp = function(){\n\t\tif(X.App.View){\n\t\t\treturn X.App.View;\n\t\t}\n\t\treturn null;\n\t};\n})();"]],"start1":0,"start2":0,"length1":0,"length2":90961}]],"length":90961}
